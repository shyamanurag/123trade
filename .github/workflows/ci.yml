name: CI\n\non:\n  push:\n    branches: [main, ci-setup]\n  pull_request:\n\njobs:\n  backend:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n      - name: Install deps\n        run: |\n          python -m pip install --upgrade pip\n          pip install -r requirements.txt ruff pytest pytest-cov\n      - name: Lint\n        run: ruff .\n      - name: Test\n        run: pytest --cov=.\n\n  frontend:\n    runs-on: ubuntu-latest\n    defaults:\n      run:\n        working-directory: frontend\n    steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v2\n        with:\n          version: 8\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'pnpm'\n      - name: Install deps\n        run: pnpm install\n      - name: Test\n        run: pnpm exec vitest run --coverage || echo 'tests failed'\n      - name: Build\n        run: pnpm run build\n