var Di=Object.defineProperty;var Ei=(s,e,t)=>e in s?Di(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var A=(s,e,t)=>Ei(s,typeof e!="symbol"?e+"":e,t);import{j as r,C as _e,a as je,B as F,T as D,b as Ee,c as qn,A as Ii,I as Kn,R as ls,L as _s,d as Ai,G as re,e as Li,f as Ri,_ as Gn,g as ds,E as hs,h as us,P as Is,i as As,k as Ls,l as Rs,m as $e,n as $,o as Fs,p as Xn,W as Qn}from"./mui.t4KZr1fA.js";import{c as Fi,r as j,a as Me,u as Zn,N as $i,B as zi,d as Ui,e as ee,f as Wi}from"./vendor.D0pJQJS8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var fs={},$s=Fi;fs.createRoot=$s.createRoot,fs.hydrateRoot=$s.hydrateRoot;const Ot=({data:s=[],type:e="line",height:t=300,width:n="100%",color:i="#2563eb",backgroundColor:a="transparent"})=>{const o=j.useRef(null),c=j.useRef(null);j.useEffect(()=>{!s.length||!o.current||l()},[s,e,t,n]);const l=()=>{const g=o.current,x=g.getContext("2d"),v=c.current;if(g.width=v.offsetWidth,g.height=t,x.clearRect(0,0,g.width,g.height),!s.length){h(x,g);return}const S=40,b=g.width-2*S,_=g.height-2*S;let k=d(s);switch(e){case"line":u(x,k,S,b,_);break;case"area":f(x,k,S,b,_);break;case"bar":m(x,k,S,b,_);break;case"pie":y(x,k,g.width/2,g.height/2,Math.min(b,_)/3);break;default:u(x,k,S,b,_)}},d=g=>e==="pie"?g.map(x=>({label:x.name||x.label,value:x.value||x.y})):g.map((x,v)=>({x:x.x||x.date||v,y:x.y||x.value||0,label:x.label||x.name})),h=(g,x)=>{g.fillStyle="#64748b",g.font="16px Arial",g.textAlign="center",g.fillText("No data available",x.width/2,x.height/2)},u=(g,x,v,S,b)=>{if(!x.length)return;const _=x.map(w=>w.y),k=Math.min(..._),O=Math.max(..._)-k||1;p(g,v,S,b,"#e5e7eb"),g.beginPath(),g.strokeStyle=i,g.lineWidth=2,x.forEach((w,T)=>{const M=v+T/(x.length-1)*S,P=v+b-(w.y-k)/O*b;T===0?g.moveTo(M,P):g.lineTo(M,P)}),g.stroke(),x.forEach((w,T)=>{const M=v+T/(x.length-1)*S,P=v+b-(w.y-k)/O*b;g.beginPath(),g.arc(M,P,3,0,2*Math.PI),g.fillStyle=i,g.fill()})},f=(g,x,v,S,b)=>{if(!x.length)return;const _=x.map(T=>T.y),k=Math.min(..._),O=Math.max(..._)-k||1;p(g,v,S,b,"#e5e7eb");const w=g.createLinearGradient(0,v,0,v+b);w.addColorStop(0,i+"40"),w.addColorStop(1,i+"10"),g.beginPath(),g.fillStyle=w,x.forEach((T,M)=>{const P=v+M/(x.length-1)*S,L=v+b-(T.y-k)/O*b;M===0&&g.moveTo(P,v+b),g.lineTo(P,L)}),g.lineTo(v+S,v+b),g.closePath(),g.fill(),u(g,x,v,S,b)},m=(g,x,v,S,b)=>{if(!x.length)return;const _=x.map(M=>M.y),k=Math.min(0,Math.min(..._)),O=Math.max(..._)-k||1;p(g,v,S,b,"#e5e7eb");const w=S/x.length*.8,T=S/x.length*.2;x.forEach((M,P)=>{const L=v+P*(S/x.length)+T/2,G=Math.abs(M.y-k)/O*b,R=M.y>=0?v+b-G:v+b-Math.abs(k)/O*b;g.fillStyle=M.y>=0?i:"#ef4444",g.fillRect(L,R,w,G)})},y=(g,x,v,S,b)=>{if(!x.length)return;const _=x.reduce((O,w)=>O+w.value,0);let k=-Math.PI/2;const N=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"];x.forEach((O,w)=>{const T=O.value/_*2*Math.PI;g.beginPath(),g.moveTo(v,S),g.arc(v,S,b,k,k+T),g.closePath(),g.fillStyle=N[w%N.length],g.fill(),g.strokeStyle="#ffffff",g.lineWidth=2,g.stroke();const M=k+T/2,P=v+Math.cos(M)*(b*.7),L=S+Math.sin(M)*(b*.7);g.fillStyle="#ffffff",g.font="12px Arial",g.textAlign="center",g.fillText(`${(O.value/_*100).toFixed(1)}%`,P,L),k+=T})},p=(g,x,v,S,b)=>{g.strokeStyle=b,g.lineWidth=1;for(let _=0;_<=5;_++){const k=x+_/5*S;g.beginPath(),g.moveTo(x,k),g.lineTo(x+v,k),g.stroke()}for(let _=0;_<=5;_++){const k=x+_/5*v;g.beginPath(),g.moveTo(k,x),g.lineTo(k,x+S),g.stroke()}};return r.jsxs("div",{ref:c,className:"chart-container",style:{width:n,height:t,position:"relative"},children:[r.jsx("canvas",{ref:o,style:{width:"100%",height:"100%",backgroundColor:a}}),s.length===0&&r.jsx("div",{className:"chart-no-data",children:r.jsx("p",{children:"No data available"})})]})},Jn=({data:s,columns:e,title:t})=>!s||!e?r.jsxs("div",{className:"data-table",children:[r.jsx("h3",{children:t||"Data Table"}),r.jsx("p",{children:"No data available"})]}):r.jsxs("div",{className:"data-table",children:[t&&r.jsx("h3",{children:t}),r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsx("tr",{children:e.map((n,i)=>r.jsx("th",{children:n.header},i))})}),r.jsx("tbody",{children:s.map((n,i)=>r.jsx("tr",{children:e.map((a,o)=>r.jsx("td",{children:a.accessor?n[a.accessor]:n[a.key]||"-"},o))},i))})]})]}),Se=({size:s="medium",color:e="primary",text:t=null,className:n=""})=>{const i=()=>{switch(s){case"small":return"spinner-sm";case"large":return"spinner-lg";case"xl":return"spinner-xl";default:return""}},a=()=>{switch(e){case"success":return"spinner-success";case"warning":return"spinner-warning";case"error":return"spinner-error";case"white":return"spinner-white";default:return"spinner-primary"}};return r.jsxs("div",{className:`loading-spinner-container ${n}`,children:[r.jsx("div",{className:`loading-spinner ${i()} ${a()}`}),t&&r.jsx("span",{className:"loading-text",children:t})]})},q=({title:s,value:e,subValue:t,change:n,changePercent:i,icon:a,variant:o="default",onClick:c,loading:l=!1})=>{const d=()=>{switch(o){case"success":return"metric-card-success";case"danger":return"metric-card-danger";case"warning":return"metric-card-warning";case"info":return"metric-card-info";default:return""}},h=()=>n==null?"":n>=0?"text-success":"text-error";return r.jsxs("div",{className:`metric-card ${d()} ${c?"clickable":""}`,onClick:c,children:[r.jsxs("div",{className:"metric-header",children:[r.jsx("div",{className:"metric-icon",children:a}),r.jsx("div",{className:"metric-title",children:s})]}),r.jsx("div",{className:"metric-body",children:l?r.jsx("div",{className:"metric-loading",children:r.jsx("div",{className:"loading-spinner"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"metric-value",children:e}),t&&r.jsx("div",{className:"metric-subvalue",children:t}),(n!==void 0||i!==void 0)&&r.jsxs("div",{className:`metric-change ${h()}`,children:[n!==void 0&&r.jsxs("span",{className:"change-amount",children:[n>=0?"+":"",typeof n=="number"?n.toLocaleString("en-IN"):n]}),i!==void 0&&r.jsxs("span",{className:"change-percent",children:["(",i>=0?"+":"",typeof i=="number"?i.toFixed(2):i,"%)"]})]})]})})]})},qt="https://quantumcrypto-l43mb.ondigitalocean.app",Hi=()=>{var m,y,p,g,x;const[s,e]=j.useState({performance:{totalReturn:0,sharpeRatio:0,maxDrawdown:0,winRate:0,avgProfit:0,avgLoss:0,totalTrades:0},charts:{pnlChart:[],returnsChart:[],drawdownChart:[],volumeChart:[]},trades:[],monthlyReturns:[]}),[t,n]=j.useState(!0),[i,a]=j.useState("3M"),[o,c]=j.useState("pnl");j.useEffect(()=>{l()},[i]);const l=async()=>{try{n(!0);const[v,S,b]=await Promise.all([fetch(`${qt}/api/analytics/performance?range=${i}`),fetch(`${qt}/api/analytics/trades?range=${i}`),fetch(`${qt}/api/analytics/charts?range=${i}`)]),_=v.ok?await v.json():{},k=S.ok?await S.json():[],N=b.ok?await b.json():{};e({performance:_,trades:k,charts:N,monthlyReturns:d()})}catch(v){console.error("Failed to load analytics data:",v)}finally{n(!1)}},d=()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(S=>({month:S,return:(Math.random()-.5)*20})),h=[{key:"date",label:"Date",render:v=>new Date(v).toLocaleDateString()},{key:"symbol",label:"Symbol",render:v=>r.jsx("strong",{children:v})},{key:"type",label:"Type",render:v=>r.jsx("span",{className:`badge ${v==="BUY"?"badge-success":"badge-danger"}`,children:v})},{key:"quantity",label:"Qty",align:"right"},{key:"price",label:"Price",align:"right",render:v=>`₹${v.toFixed(2)}`},{key:"pnl",label:"P&L",align:"right",render:v=>r.jsxs("span",{className:v>=0?"text-success":"text-error",children:["₹",v.toLocaleString("en-IN")]})},{key:"duration",label:"Duration",render:v=>v||"Intraday"}],u=()=>{switch(o){case"pnl":return s.charts.pnlChart||[];case"returns":return s.charts.returnsChart||[];case"drawdown":return s.charts.drawdownChart||[];case"volume":return s.charts.volumeChart||[];default:return[]}};if(t)return r.jsxs("div",{className:"analytics-loading",children:[r.jsx(Se,{size:"large"}),r.jsx("p",{children:"Loading Analytics..."})]});const{performance:f}=s;return r.jsxs("div",{className:"analytics",children:[r.jsxs("div",{className:"analytics-header",children:[r.jsx("h1",{children:"Trading Analytics"}),r.jsxs("div",{className:"analytics-controls",children:[r.jsxs("select",{value:i,onChange:v=>a(v.target.value),className:"form-select",children:[r.jsx("option",{value:"1M",children:"1 Month"}),r.jsx("option",{value:"3M",children:"3 Months"}),r.jsx("option",{value:"6M",children:"6 Months"}),r.jsx("option",{value:"1Y",children:"1 Year"}),r.jsx("option",{value:"ALL",children:"All Time"})]}),r.jsx("button",{className:"btn btn-primary",children:"Export Report"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 mb-lg",children:[r.jsx(q,{title:"Total Return",value:`${((m=f.totalReturn)==null?void 0:m.toFixed(2))||"0.00"}%`,icon:"📈",variant:f.totalReturn>=0?"success":"danger"}),r.jsx(q,{title:"Sharpe Ratio",value:((y=f.sharpeRatio)==null?void 0:y.toFixed(2))||"0.00",subValue:"Risk-adjusted return",icon:"📊"}),r.jsx(q,{title:"Max Drawdown",value:`${((p=f.maxDrawdown)==null?void 0:p.toFixed(2))||"0.00"}%`,icon:"📉",variant:"warning"}),r.jsx(q,{title:"Win Rate",value:`${((g=f.winRate)==null?void 0:g.toFixed(1))||"0.0"}%`,subValue:`${f.totalTrades||0} total trades`,icon:"🎯"})]}),r.jsxs("div",{className:"grid grid-cols-3 mb-lg",children:[r.jsx(q,{title:"Average Profit",value:`₹${((x=f.avgProfit)==null?void 0:x.toLocaleString("en-IN"))||"0"}`,icon:"💰",variant:"success"}),r.jsx(q,{title:"Average Loss",value:`₹${Math.abs(f.avgLoss||0).toLocaleString("en-IN")}`,icon:"💸",variant:"danger"}),r.jsx(q,{title:"Profit Factor",value:(Math.abs(f.avgProfit||0)/Math.abs(f.avgLoss||1)).toFixed(2),subValue:"Profit/Loss ratio",icon:"⚖️"})]}),r.jsxs("div",{className:"card mb-lg",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Performance Charts"}),r.jsxs("div",{className:"chart-tabs",children:[r.jsx("button",{className:`tab-btn ${o==="pnl"?"active":""}`,onClick:()=>c("pnl"),children:"P&L Curve"}),r.jsx("button",{className:`tab-btn ${o==="returns"?"active":""}`,onClick:()=>c("returns"),children:"Returns"}),r.jsx("button",{className:`tab-btn ${o==="drawdown"?"active":""}`,onClick:()=>c("drawdown"),children:"Drawdown"}),r.jsx("button",{className:`tab-btn ${o==="volume"?"active":""}`,onClick:()=>c("volume"),children:"Volume"})]})]}),r.jsx("div",{className:"card-body",children:r.jsx(Ot,{data:u(),type:o==="volume"?"bar":"line",height:400})})]}),r.jsxs("div",{className:"grid grid-cols-2 mb-lg",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Monthly Returns"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"monthly-returns-grid",children:s.monthlyReturns.map((v,S)=>r.jsxs("div",{className:`monthly-return-cell ${v.return>=0?"positive":"negative"}`,style:{backgroundColor:v.return>=0?`rgba(16, 185, 129, ${Math.abs(v.return)/10})`:`rgba(239, 68, 68, ${Math.abs(v.return)/10})`},children:[r.jsx("div",{className:"month-name",children:v.month}),r.jsxs("div",{className:"month-return",children:[v.return.toFixed(1),"%"]})]},S))})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Risk Metrics"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"risk-metrics",children:[r.jsxs("div",{className:"risk-metric",children:[r.jsx("span",{className:"metric-label",children:"Volatility"}),r.jsx("span",{className:"metric-value",children:"15.3%"})]}),r.jsxs("div",{className:"risk-metric",children:[r.jsx("span",{className:"metric-label",children:"Beta"}),r.jsx("span",{className:"metric-value",children:"1.12"})]}),r.jsxs("div",{className:"risk-metric",children:[r.jsx("span",{className:"metric-label",children:"Alpha"}),r.jsx("span",{className:"metric-value",children:"2.4%"})]}),r.jsxs("div",{className:"risk-metric",children:[r.jsx("span",{className:"metric-label",children:"VaR (95%)"}),r.jsx("span",{className:"metric-value",children:"₹12,450"})]}),r.jsxs("div",{className:"risk-metric",children:[r.jsx("span",{className:"metric-label",children:"Correlation (NIFTY)"}),r.jsx("span",{className:"metric-value",children:"0.85"})]}),r.jsxs("div",{className:"risk-metric",children:[r.jsx("span",{className:"metric-label",children:"Information Ratio"}),r.jsx("span",{className:"metric-value",children:"1.23"})]})]})})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Trade Analysis"}),r.jsxs("div",{className:"trade-filters",children:[r.jsxs("select",{className:"form-select",children:[r.jsx("option",{value:"all",children:"All Trades"}),r.jsx("option",{value:"winners",children:"Winners Only"}),r.jsx("option",{value:"losers",children:"Losers Only"})]}),r.jsx("input",{type:"text",placeholder:"Search symbol...",className:"form-input"})]})]}),r.jsx("div",{className:"card-body",children:r.jsx(Jn,{data:s.trades,columns:h,emptyMessage:"No trades found for selected period"})})]})]})},Bi=()=>r.jsxs("div",{className:"market-overview",children:[r.jsx("h3",{children:"Market Overview"}),r.jsx("div",{className:"market-summary",children:r.jsx("p",{children:"Market overview component"})})]}),Vi=()=>r.jsxs("div",{className:"news-panel",children:[r.jsx("h3",{children:"Market News"}),r.jsx("div",{className:"news-content",children:r.jsx("p",{children:"Market news will be displayed here"})})]}),Yi=()=>r.jsxs("div",{className:"position-summary",children:[r.jsx("h3",{children:"Positions Summary"}),r.jsx("div",{className:"positions-content",children:r.jsx("p",{children:"Position summary will be displayed here"})})]}),qi=()=>r.jsxs("div",{className:"quick-actions",children:[r.jsx("h3",{children:"Quick Actions"}),r.jsxs("div",{className:"actions-buttons",children:[r.jsx("button",{children:"Buy"}),r.jsx("button",{children:"Sell"}),r.jsx("button",{children:"View Portfolio"})]})]}),Ki=()=>r.jsxs("div",{className:"recent-trades",children:[r.jsx("h3",{children:"Recent Trades"}),r.jsx("div",{className:"trades-list",children:r.jsx("p",{children:"Recent trading activity will be displayed here"})})]}),dt="https://quantumcrypto-l43mb.ondigitalocean.app",zs=()=>{const[s,e]=j.useState({portfolio:{totalValue:0,dayPnL:0,dayPnLPercent:0,totalPnL:0,totalPnLPercent:0,availableMargin:0,usedMargin:0},positions:[],recentTrades:[],marketData:{},performance:{chart:[],metrics:{}}}),[t,n]=j.useState(!0),[i,a]=j.useState(null),[o,c]=j.useState(new Date);j.useEffect(()=>{l();const m=setInterval(()=>{l(!1)},1e4);return()=>clearInterval(m)},[]);const l=async(m=!0)=>{try{m&&n(!0),a(null);const[y,p,g,x]=await Promise.all([fetch(`${dt}/api/portfolio/summary`),fetch(`${dt}/api/portfolio/positions`),fetch(`${dt}/api/orders/recent`),fetch(`${dt}/api/performance/metrics`)]),v=y.ok?await y.json():{},S=p.ok?await p.json():[],b=g.ok?await g.json():[],_=x.ok?await x.json():{};e({portfolio:{totalValue:v.totalValue||0,dayPnL:v.dayPnL||0,dayPnLPercent:v.dayPnLPercent||0,totalPnL:v.totalPnL||0,totalPnLPercent:v.totalPnLPercent||0,availableMargin:v.availableMargin||0,usedMargin:v.usedMargin||0},positions:Array.isArray(S)?S.slice(0,10):[],recentTrades:Array.isArray(b)?b.slice(0,10):[],performance:_.data||{chart:[],metrics:{}}}),c(new Date)}catch(y){console.error("Failed to load dashboard data:",y),a("Failed to load dashboard data")}finally{m&&n(!1)}};if(t)return r.jsxs("div",{className:"dashboard-loading",children:[r.jsx(Se,{size:"large"}),r.jsx("p",{children:"Loading Dashboard..."})]});if(i)return r.jsxs("div",{className:"dashboard-error",children:[r.jsx("h3",{children:"Dashboard Error"}),r.jsx("p",{children:i}),r.jsx("button",{className:"btn btn-primary",onClick:()=>l(),children:"Retry"})]});const{portfolio:d,positions:h,recentTrades:u,performance:f}=s;return r.jsxs("div",{className:"dashboard",children:[r.jsxs("div",{className:"dashboard-header",children:[r.jsxs("div",{children:[r.jsx("h1",{children:"Trading Dashboard"}),r.jsxs("p",{className:"text-secondary",children:["Last updated: ",o.toLocaleTimeString()]})]}),r.jsx(qi,{})]}),r.jsxs("div",{className:"grid grid-cols-4 mb-lg",children:[r.jsx(q,{title:"Portfolio Value",value:`₹${d.totalValue.toLocaleString("en-IN")}`,change:d.totalPnL,changePercent:d.totalPnLPercent,icon:"💰"}),r.jsx(q,{title:"Day P&L",value:`₹${d.dayPnL.toLocaleString("en-IN")}`,change:d.dayPnL,changePercent:d.dayPnLPercent,icon:d.dayPnL>=0?"📈":"📉",variant:d.dayPnL>=0?"success":"danger"}),r.jsx(q,{title:"Available Margin",value:`₹${d.availableMargin.toLocaleString("en-IN")}`,subValue:`Used: ₹${d.usedMargin.toLocaleString("en-IN")}`,icon:"💳"}),r.jsx(q,{title:"Active Positions",value:h.length.toString(),subValue:`${h.filter(m=>m.pnl>0).length} profitable`,icon:"📊"})]}),r.jsxs("div",{className:"grid grid-cols-3 mb-lg",children:[r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Portfolio Performance"}),r.jsx("div",{className:"chart-controls",children:r.jsxs("select",{className:"form-select",children:[r.jsx("option",{value:"1D",children:"1 Day"}),r.jsx("option",{value:"1W",children:"1 Week"}),r.jsx("option",{value:"1M",children:"1 Month"}),r.jsx("option",{value:"3M",children:"3 Months"}),r.jsx("option",{value:"1Y",children:"1 Year"})]})})]}),r.jsx("div",{className:"card-body",children:r.jsx(Ot,{data:f.chart,type:"line",height:300})})]})}),r.jsx("div",{children:r.jsx(Bi,{})})]}),r.jsxs("div",{className:"grid grid-cols-2 mb-lg",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Top Positions"}),r.jsx("a",{href:"/portfolio",className:"text-primary",children:"View All"})]}),r.jsx("div",{className:"card-body",children:r.jsx(Yi,{positions:h})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Recent Trades"}),r.jsx("a",{href:"/orders",className:"text-primary",children:"View All"})]}),r.jsx("div",{className:"card-body",children:r.jsx(Ki,{trades:u})})]})]}),r.jsxs("div",{className:"grid grid-cols-3",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(Vi,{})}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Trading Alerts"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"alerts-list",children:[r.jsxs("div",{className:"alert alert-success",children:[r.jsx("strong",{children:"RELIANCE"})," - Target achieved: ₹2,500"]}),r.jsxs("div",{className:"alert alert-warning",children:[r.jsx("strong",{children:"TATASTEEL"})," - Stop loss triggered"]}),r.jsxs("div",{className:"alert alert-info",children:[r.jsx("strong",{children:"INFY"})," - Earnings announcement today"]})]})})]})]})]})};class Gi extends Me.Component{constructor(t){super(t);A(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?r.jsx("div",{className:"error-boundary",children:r.jsxs("div",{className:"error-container",children:[r.jsx("div",{className:"error-icon",children:"⚠️"}),r.jsx("h2",{className:"error-title",children:"Something went wrong"}),r.jsx("p",{className:"error-description",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),r.jsxs("div",{className:"error-actions",children:[r.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),r.jsx("button",{className:"btn btn-secondary",onClick:()=>window.location.reload(),children:"Refresh Page"})]}),!1]})}):this.props.children}}const Kt="https://quantumcrypto-l43mb.ondigitalocean.app",ht="wss://quantumcrypto-l43mb.ondigitalocean.app/ws",Xi=Kt.endsWith("/")?Kt.slice(0,-1):Kt,C=(s,e=!1)=>{let t=s.startsWith("/")?s:`/${s}`;return e&&!t.endsWith("/")&&(t+="/"),{url:`${Xi}${t}`,fallback:{success:!1,error:"Service temporarily unavailable",data:null}}},ms={LOGIN:C("/api/auth/login"),REGISTER:C("/api/auth/register"),LOGOUT:C("/api/auth/logout"),REFRESH_TOKEN:C("/api/auth/refresh-token"),USER_PROFILE:C("/api/auth/me"),USERS:C("/api/v1/users/performance",!0),USER_PERFORMANCE:C("/api/v1/users/performance"),USER_CURRENT:C("/api/v1/users/current"),USER_ANALYTICS:C("/api/v1/user-analytics"),BROKER_USERS:C("/api/v1/control/users/broker"),TRADES:C("/api/v1/trades",!0),POSITIONS:C("/api/v1/positions",!0),ORDERS:C("/api/v1/orders",!0),RISK_METRICS:C("/api/v1/risk/metrics"),STRATEGIES:C("/api/v1/strategies"),AUTONOMOUS:C("/api/v1/autonomous"),TRADING_CONTROL:C("/api/v1/control/trading/control"),TRADING_STATUS:C("/api/v1/control/trading/status"),MARKET_INDICES:C("/api/market/indices"),MARKET_STATUS:C("/api/market/market-status"),MARKET_DATA:C("/api/v1/market-data/NIFTY"),SYMBOLS:C("/api/market/symbols"),STRATEGIES:C("/api/v1/autonomous/strategies"),STRATEGY_PERFORMANCE:C("/api/v1/strategies/performance"),DASHBOARD_SUMMARY:C("/api/v1/dashboard/summary"),DAILY_PNL:C("/api/v1/monitoring/daily-pnl"),RECOMMENDATIONS:C("/api/v1/elite",!0),ELITE_RECOMMENDATIONS:C("/api/v1/elite",!0),DASHBOARD_DATA:C("/api/v1/dashboard/data"),BROKER_CONNECT:C("/api/v1/broker/connect"),BROKER_DISCONNECT:C("/api/v1/broker/disconnect"),BROKER_STATUS:C("/api/v1/broker/status"),SYSTEM_STATUS:C("/api/v1/system/status"),SYSTEM_LOGS:C("/api/v1/system/logs"),SYSTEM_METRICS:C("/api/v1/system/metrics"),RISK_METRICS:C("/api/v1/risk/metrics"),RISK_LIMITS:C("/api/v1/risk/limits"),RISK_ALERTS:C("/api/v1/risk/alerts"),AUTONOMOUS_STATUS:C("/api/v1/autonomous/status"),AUTONOMOUS_START:C("/api/v1/autonomous/start"),AUTONOMOUS_STOP:C("/api/v1/autonomous/stop"),AUTONOMOUS_CONTROL:C("/api/v1/autonomous/control"),AUTONOMOUS_DATA:C("/api/v1/autonomous/status"),WS_ENDPOINT:`${ht}/ws`,WS_MARKET_DATA:`${ht}/ws`,WS_ORDERS:`${ht}/ws`,WS_POSITIONS:`${ht}/ws`,TICK_DATA:C("/api/v1/tick-data"),ORDER_BOOK:C("/api/v1/order-book"),ACCOUNT:C("/api/v1/account"),HEALTH:C("/health"),HEALTH_READY_JSON:C("/health/ready/json"),METRICS:C("/metrics"),CONFIG:C("/config"),ZERODHA_AUTH_URL:C("/auth/zerodha/auth-url"),ZERODHA_AUTH_STATUS:C("/auth/zerodha/status"),ZERODHA_SUBMIT_TOKEN:C("/auth/zerodha/submit-token"),ZERODHA_TEST_CONNECTION:C("/auth/zerodha/test-connection"),ZERODHA_LOGOUT:C("/auth/zerodha/logout"),ZERODHA_LOGIN:C("/api/zerodha/login"),SEARCH_SYMBOLS:C("/api/v1/search/symbols"),SEARCH_TRADES:C("/api/v1/search/trades"),SEARCH_STRATEGIES:C("/api/v1/search/strategies"),SEARCH_USERS:C("/api/v1/search/users"),SEARCH_RECOMMENDATIONS:C("/api/v1/search/recommendations"),SEARCH_GLOBAL:C("/api/v1/search/global"),SEARCH_AUTOCOMPLETE:C("/api/v1/search/autocomplete")},gs=async(s,e={})=>{const t=localStorage.getItem("access_token"),n={Accept:"application/json",...e.headers};e.body&&(n["Content-Type"]="application/json"),t&&(n.Authorization=`Bearer ${t}`);try{const i=await fetch(s,{...e,headers:n});if(i.status===401)throw localStorage.removeItem("access_token"),localStorage.removeItem("user_info"),window.location.reload(),new Error("Authentication required");return i}catch(i){throw console.error("Fetch error:",i),i}},Qi=()=>{var y;const[s,e]=j.useState([]),[t,n]=j.useState(null),[i,a]=j.useState(!0),[o,c]=j.useState(null),[l,d]=j.useState(null),h=async()=>{var p,g;try{d(null),s.length===0&&a(!0);const v=await(await gs(ms.MARKET_INDICES.url)).json(),b=await(await gs(ms.MARKET_STATUS.url)).json();if(v.success){const _=((p=v.data)==null?void 0:p.indices)||[];e(_),(g=v.data)!=null&&g.market_status&&n({market_status:v.data.market_status,current_time:v.timestamp})}else d("Unable to fetch market data");if(b.success){const _=b.data||b;n(_)}c(new Date)}catch(x){console.error("Error fetching market data:",x),d("Failed to connect to market data service")}finally{a(!1)}};j.useEffect(()=>{h();const p=setInterval(h,12e4);return()=>clearInterval(p)},[]);const u=p=>{switch(p){case"OPEN":return"success";case"PRE_OPEN":return"warning";case"CLOSED":return"error";default:return"default"}},f=p=>new Intl.NumberFormat("en-IN").format(p),m=p=>`${p>=0?"+":""}${p.toFixed(2)}%`;return r.jsx(_e,{sx:{height:"100%",position:"relative"},children:r.jsxs(je,{children:[r.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[r.jsxs(F,{children:[r.jsx(D,{variant:"h6",sx:{fontWeight:600},children:"Market Indices"}),t&&r.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[r.jsx(Ee,{label:t.market_status,color:u(t.market_status),size:"small"}),r.jsx(D,{variant:"caption",color:"text.secondary",children:t.current_time})]})]}),r.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:1},children:[o&&r.jsx(qn,{title:`Last updated: ${o.toLocaleTimeString()}`,children:r.jsx(Ii,{sx:{fontSize:16,color:"text.secondary"}})}),r.jsx(Kn,{size:"small",onClick:h,disabled:i,children:r.jsx(ls,{})})]})]}),i&&s.length===0&&r.jsxs(F,{sx:{py:4},children:[r.jsx(_s,{}),r.jsx(D,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:2},children:"Loading market data..."})]}),l&&!i&&r.jsxs(F,{sx:{py:2,textAlign:"center"},children:[r.jsx(D,{variant:"body2",color:"error",sx:{mb:1},children:l}),r.jsx(Ai,{size:"small",onClick:h,startIcon:r.jsx(ls,{}),children:"Retry"})]}),r.jsx(re,{container:!0,spacing:2,children:s.map(p=>r.jsx(re,{item:!0,xs:12,children:r.jsxs(F,{sx:{p:2,borderRadius:2,bgcolor:"background.default",border:"1px solid",borderColor:"divider",transition:"all 0.3s ease","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:1}},children:[r.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[r.jsxs(F,{children:[r.jsx(D,{variant:"subtitle2",color:"text.secondary",children:p.name}),r.jsx(D,{variant:"h5",sx:{fontWeight:600,mt:.5},children:f(p.last_price)})]}),r.jsxs(F,{sx:{textAlign:"right"},children:[r.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:.5},children:[p.change>=0?r.jsx(Li,{sx:{color:"success.main",fontSize:20}}):r.jsx(Ri,{sx:{color:"error.main",fontSize:20}}),r.jsx(D,{variant:"body1",sx:{fontWeight:600,color:p.change>=0?"success.main":"error.main"},children:f(Math.abs(p.change))})]}),r.jsx(D,{variant:"body2",sx:{color:p.change>=0?"success.main":"error.main"},children:m(p.change_percent)})]})]}),r.jsxs(F,{sx:{display:"flex",gap:2,mt:2},children:[r.jsxs(F,{children:[r.jsx(D,{variant:"caption",color:"text.secondary",children:"Open"}),r.jsx(D,{variant:"body2",children:f(p.open)})]}),r.jsxs(F,{children:[r.jsx(D,{variant:"caption",color:"text.secondary",children:"High"}),r.jsx(D,{variant:"body2",color:"success.main",children:f(p.high)})]}),r.jsxs(F,{children:[r.jsx(D,{variant:"caption",color:"text.secondary",children:"Low"}),r.jsx(D,{variant:"body2",color:"error.main",children:f(p.low)})]}),r.jsxs(F,{children:[r.jsx(D,{variant:"caption",color:"text.secondary",children:"Volume"}),r.jsx(D,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:p.volume>=1e7?`${(p.volume/1e7).toFixed(1)}Cr`:p.volume>=1e5?`${(p.volume/1e5).toFixed(1)}L`:f(p.volume)})]})]})]})},p.symbol))}),t&&t.data_provider&&r.jsx(F,{sx:{mt:3,pt:2,borderTop:"1px solid",borderColor:"divider"},children:r.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(D,{variant:"caption",color:"text.secondary",children:["Data Provider: ",typeof t.data_provider=="string"?t.data_provider:((y=t.data_provider)==null?void 0:y.name)||"TrueData"]}),r.jsx(Ee,{label:(()=>{const p=t.data_provider;if(typeof p=="string")return p;if(typeof p=="object"&&p!==null){if(p.status&&typeof p.status=="string")return p.status;if(p.connected===!0)return"CONNECTED";if(p.connected===!1)return"DISCONNECTED";if("deployment_id"in p||"connection_attempts"in p)return p.connected?"CONNECTED":"DISCONNECTED"}return"UNKNOWN"})(),color:(()=>{const p=t.data_provider;return typeof p=="string"?p==="CONNECTED"?"success":"default":typeof p=="object"&&p!==null&&(p.status==="CONNECTED"||p.connected===!0)?"success":"default"})(),size:"small",variant:"outlined"})]})})]})})};function ke(s){if(s===null||s===!0||s===!1)return NaN;var e=Number(s);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function K(s,e){if(e.length<s)throw new TypeError(s+" argument"+(s>1?"s":"")+" required, but only "+e.length+" present")}function ne(s){K(1,arguments);var e=Object.prototype.toString.call(s);return s instanceof Date||Gn(s)==="object"&&e==="[object Date]"?new Date(s.getTime()):typeof s=="number"||e==="[object Number]"?new Date(s):((typeof s=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Zi(s,e){K(2,arguments);var t=ne(s).getTime(),n=ke(e);return new Date(t+n)}var Ji={};function Wt(){return Ji}function ea(s){var e=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return e.setUTCFullYear(s.getFullYear()),s.getTime()-e.getTime()}function ta(s){return K(1,arguments),s instanceof Date||Gn(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}function sa(s){if(K(1,arguments),!ta(s)&&typeof s!="number")return!1;var e=ne(s);return!isNaN(Number(e))}function na(s,e){K(2,arguments);var t=ke(e);return Zi(s,-t)}var ia=864e5;function aa(s){K(1,arguments);var e=ne(s),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),i=t-n;return Math.floor(i/ia)+1}function Pt(s){K(1,arguments);var e=1,t=ne(s),n=t.getUTCDay(),i=(n<e?7:0)+n-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function ei(s){K(1,arguments);var e=ne(s),t=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(t+1,0,4),n.setUTCHours(0,0,0,0);var i=Pt(n),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var o=Pt(a);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function ra(s){K(1,arguments);var e=ei(s),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var n=Pt(t);return n}var oa=6048e5;function ca(s){K(1,arguments);var e=ne(s),t=Pt(e).getTime()-ra(e).getTime();return Math.round(t/oa)+1}function Dt(s,e){var t,n,i,a,o,c,l,d;K(1,arguments);var h=Wt(),u=ke((t=(n=(i=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&i!==void 0?i:h.weekStartsOn)!==null&&n!==void 0?n:(l=h.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ne(s),m=f.getUTCDay(),y=(m<u?7:0)+m-u;return f.setUTCDate(f.getUTCDate()-y),f.setUTCHours(0,0,0,0),f}function ti(s,e){var t,n,i,a,o,c,l,d;K(1,arguments);var h=ne(s),u=h.getUTCFullYear(),f=Wt(),m=ke((t=(n=(i=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&n!==void 0?n:(l=f.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(u+1,0,m),y.setUTCHours(0,0,0,0);var p=Dt(y,e),g=new Date(0);g.setUTCFullYear(u,0,m),g.setUTCHours(0,0,0,0);var x=Dt(g,e);return h.getTime()>=p.getTime()?u+1:h.getTime()>=x.getTime()?u:u-1}function la(s,e){var t,n,i,a,o,c,l,d;K(1,arguments);var h=Wt(),u=ke((t=(n=(i=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&n!==void 0?n:(l=h.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:1),f=ti(s,e),m=new Date(0);m.setUTCFullYear(f,0,u),m.setUTCHours(0,0,0,0);var y=Dt(m,e);return y}var da=6048e5;function ha(s,e){K(1,arguments);var t=ne(s),n=Dt(t,e).getTime()-la(t,e).getTime();return Math.round(n/da)+1}function I(s,e){for(var t=s<0?"-":"",n=Math.abs(s).toString();n.length<e;)n="0"+n;return t+n}var le={y:function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return I(t==="yy"?i%100:i,t.length)},M:function(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):I(n+1,2)},d:function(e,t){return I(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,t){return I(e.getUTCHours()%12||12,t.length)},H:function(e,t){return I(e.getUTCHours(),t.length)},m:function(e,t){return I(e.getUTCMinutes(),t.length)},s:function(e,t){return I(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,i=e.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,n-3));return I(a,t.length)}},Pe={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ua={G:function(e,t,n){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){var i=e.getUTCFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return le.y(e,t)},Y:function(e,t,n,i){var a=ti(e,i),o=a>0?a:1-a;if(t==="YY"){var c=o%100;return I(c,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):I(o,t.length)},R:function(e,t){var n=ei(e);return I(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return I(n,t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return I(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return I(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return le.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return I(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var a=ha(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):I(a,t.length)},I:function(e,t,n){var i=ca(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):I(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):le.d(e,t)},D:function(e,t,n){var i=aa(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):I(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var a=e.getUTCDay(),o=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return I(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var a=e.getUTCDay(),o=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return I(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return I(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=e.getUTCHours(),a=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i=e.getUTCHours(),a;switch(i===12?a=Pe.noon:i===0?a=Pe.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i=e.getUTCHours(),a;switch(i>=17?a=Pe.evening:i>=12?a=Pe.afternoon:i>=4?a=Pe.morning:a=Pe.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return le.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):le.H(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):I(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):I(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):le.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):le.s(e,t)},S:function(e,t){return le.S(e,t)},X:function(e,t,n,i){var a=i._originalDate||e,o=a.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return Ws(o);case"XXXX":case"XX":return be(o);case"XXXXX":case"XXX":default:return be(o,":")}},x:function(e,t,n,i){var a=i._originalDate||e,o=a.getTimezoneOffset();switch(t){case"x":return Ws(o);case"xxxx":case"xx":return be(o);case"xxxxx":case"xxx":default:return be(o,":")}},O:function(e,t,n,i){var a=i._originalDate||e,o=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Us(o,":");case"OOOO":default:return"GMT"+be(o,":")}},z:function(e,t,n,i){var a=i._originalDate||e,o=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Us(o,":");case"zzzz":default:return"GMT"+be(o,":")}},t:function(e,t,n,i){var a=i._originalDate||e,o=Math.floor(a.getTime()/1e3);return I(o,t.length)},T:function(e,t,n,i){var a=i._originalDate||e,o=a.getTime();return I(o,t.length)}};function Us(s,e){var t=s>0?"-":"+",n=Math.abs(s),i=Math.floor(n/60),a=n%60;if(a===0)return t+String(i);var o=e;return t+String(i)+o+I(a,2)}function Ws(s,e){if(s%60===0){var t=s>0?"-":"+";return t+I(Math.abs(s)/60,2)}return be(s,e)}function be(s,e){var t=e||"",n=s>0?"-":"+",i=Math.abs(s),a=I(Math.floor(i/60),2),o=I(i%60,2);return n+a+t+o}var Hs=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},si=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},fa=function(e,t){var n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return Hs(e,t);var o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Hs(i,t)).replace("{{time}}",si(a,t))},ma={p:si,P:fa},ga=["D","DD"],pa=["YY","YYYY"];function xa(s){return ga.indexOf(s)!==-1}function va(s){return pa.indexOf(s)!==-1}function Bs(s,e,t){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ba={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ya=function(e,t,n){var i,a=ba[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Gt(s){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):s.defaultWidth,n=s.formats[t]||s.formats[s.defaultWidth];return n}}var _a={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ja={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wa={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sa={date:Gt({formats:_a,defaultWidth:"full"}),time:Gt({formats:ja,defaultWidth:"full"}),dateTime:Gt({formats:wa,defaultWidth:"full"})},Na={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ka=function(e,t,n,i){return Na[e]};function ze(s){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",i;if(n==="formatting"&&s.formattingValues){var a=s.defaultFormattingWidth||s.defaultWidth,o=t!=null&&t.width?String(t.width):a;i=s.formattingValues[o]||s.formattingValues[a]}else{var c=s.defaultWidth,l=t!=null&&t.width?String(t.width):s.defaultWidth;i=s.values[l]||s.values[c]}var d=s.argumentCallback?s.argumentCallback(e):e;return i[d]}}var Ta={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ma={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ca={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Oa={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Da={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ea=function(e,t){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ia={ordinalNumber:Ea,era:ze({values:Ta,defaultWidth:"wide"}),quarter:ze({values:Ma,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ze({values:Ca,defaultWidth:"wide"}),day:ze({values:Oa,defaultWidth:"wide"}),dayPeriod:ze({values:Pa,defaultWidth:"wide",formattingValues:Da,defaultFormattingWidth:"wide"})};function Ue(s){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,i=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],a=e.match(i);if(!a)return null;var o=a[0],c=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(c)?La(c,function(u){return u.test(o)}):Aa(c,function(u){return u.test(o)}),d;d=s.valueCallback?s.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;var h=e.slice(o.length);return{value:d,rest:h}}}function Aa(s,e){for(var t in s)if(s.hasOwnProperty(t)&&e(s[t]))return t}function La(s,e){for(var t=0;t<s.length;t++)if(e(s[t]))return t}function Ra(s){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(s.matchPattern);if(!n)return null;var i=n[0],a=e.match(s.parsePattern);if(!a)return null;var o=s.valueCallback?s.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;var c=e.slice(i.length);return{value:o,rest:c}}}var Fa=/^(\d+)(th|st|nd|rd)?/i,$a=/\d+/i,za={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ua={any:[/^b/i,/^(a|c)/i]},Wa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ha={any:[/1/i,/2/i,/3/i,/4/i]},Ba={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Va={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ya={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qa={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ka={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ga={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xa={ordinalNumber:Ra({matchPattern:Fa,parsePattern:$a,valueCallback:function(e){return parseInt(e,10)}}),era:Ue({matchPatterns:za,defaultMatchWidth:"wide",parsePatterns:Ua,defaultParseWidth:"any"}),quarter:Ue({matchPatterns:Wa,defaultMatchWidth:"wide",parsePatterns:Ha,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ue({matchPatterns:Ba,defaultMatchWidth:"wide",parsePatterns:Va,defaultParseWidth:"any"}),day:Ue({matchPatterns:Ya,defaultMatchWidth:"wide",parsePatterns:qa,defaultParseWidth:"any"}),dayPeriod:Ue({matchPatterns:Ka,defaultMatchWidth:"any",parsePatterns:Ga,defaultParseWidth:"any"})},Qa={code:"en-US",formatDistance:ya,formatLong:Sa,formatRelative:ka,localize:Ia,match:Xa,options:{weekStartsOn:0,firstWeekContainsDate:1}},Za=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ja=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,er=/^'([^]*?)'?$/,tr=/''/g,sr=/[a-zA-Z]/;function Xt(s,e,t){var n,i,a,o,c,l,d,h,u,f,m,y,p,g;K(2,arguments);var x=String(e),v=Wt(),S=(n=(i=void 0)!==null&&i!==void 0?i:v.locale)!==null&&n!==void 0?n:Qa,b=ke((a=(o=(c=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&c!==void 0?c:v.firstWeekContainsDate)!==null&&o!==void 0?o:(d=v.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=ke((u=(f=(m=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&m!==void 0?m:v.weekStartsOn)!==null&&f!==void 0?f:(p=v.locale)===null||p===void 0||(g=p.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&u!==void 0?u:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var k=ne(s);if(!sa(k))throw new RangeError("Invalid time value");var N=ea(k),O=na(k,N),w={firstWeekContainsDate:b,weekStartsOn:_,locale:S,_originalDate:k},T=x.match(Ja).map(function(M){var P=M[0];if(P==="p"||P==="P"){var L=ma[P];return L(M,S.formatLong)}return M}).join("").match(Za).map(function(M){if(M==="''")return"'";var P=M[0];if(P==="'")return nr(M);var L=ua[P];if(L)return va(M)&&Bs(M,e,String(s)),xa(M)&&Bs(M,e,String(s)),L(O,M,S.localize,w);if(P.match(sr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return M}).join("");return T}function nr(s){var e=s.match(er);return e?e[1].replace(tr,"'"):s}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ar=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Vs=s=>{const e=ar(s);return e.charAt(0).toUpperCase()+e.slice(1)},ni=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),rr=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var or={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...c},l)=>j.createElement("svg",{ref:l,...or,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:ni("lucide",i),...!a&&!rr(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>j.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(s,e)=>{const t=j.forwardRef(({className:n,...i},a)=>j.createElement(cr,{ref:a,iconNode:e,className:ni(`lucide-${ir(Vs(s))}`,`lucide-${s}`,n),...i}));return t.displayName=Vs(s),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dr=Q("activity",lr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ur=Q("chart-no-axes-column",hr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mr=Q("circle-alert",fr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pr=Q("circle-check-big",gr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vr=Q("circle-x",xr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],yr=Q("pause",br);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jr=Q("radio",_r);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sr=Q("shield",wr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Ys=Q("trending-down",Nr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Qt=Q("trending-up",kr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mr=Q("triangle-alert",Tr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Or=Q("users",Cr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Dr=Q("zap",Pr);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function at(s){return s+.5|0}const he=(s,e,t)=>Math.max(Math.min(s,t),e);function qe(s){return he(at(s*2.55),0,255)}function ue(s){return he(at(s*255),0,255)}function ae(s){return he(at(s/2.55)/100,0,1)}function qs(s){return he(at(s*100),0,100)}const J={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ps=[..."0123456789ABCDEF"],Er=s=>ps[s&15],Ir=s=>ps[(s&240)>>4]+ps[s&15],ut=s=>(s&240)>>4===(s&15),Ar=s=>ut(s.r)&&ut(s.g)&&ut(s.b)&&ut(s.a);function Lr(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&J[s[1]]*17,g:255&J[s[2]]*17,b:255&J[s[3]]*17,a:e===5?J[s[4]]*17:255}:(e===7||e===9)&&(t={r:J[s[1]]<<4|J[s[2]],g:J[s[3]]<<4|J[s[4]],b:J[s[5]]<<4|J[s[6]],a:e===9?J[s[7]]<<4|J[s[8]]:255})),t}const Rr=(s,e)=>s<255?e(s):"";function Fr(s){var e=Ar(s)?Er:Ir;return s?"#"+e(s.r)+e(s.g)+e(s.b)+Rr(s.a,e):void 0}const $r=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ii(s,e,t){const n=e*Math.min(t,1-t),i=(a,o=(a+s/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function zr(s,e,t){const n=(i,a=(i+s/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function Ur(s,e,t){const n=ii(s,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)n[i]*=1-e-t,n[i]+=e;return n}function Wr(s,e,t,n,i){return s===i?(e-t)/n+(e<t?6:0):e===i?(t-s)/n+2:(s-e)/n+4}function js(s){const t=s.r/255,n=s.g/255,i=s.b/255,a=Math.max(t,n,i),o=Math.min(t,n,i),c=(a+o)/2;let l,d,h;return a!==o&&(h=a-o,d=c>.5?h/(2-a-o):h/(a+o),l=Wr(t,n,i,h,a),l=l*60+.5),[l|0,d||0,c]}function ws(s,e,t,n){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,n)).map(ue)}function Ss(s,e,t){return ws(ii,s,e,t)}function Hr(s,e,t){return ws(Ur,s,e,t)}function Br(s,e,t){return ws(zr,s,e,t)}function ai(s){return(s%360+360)%360}function Vr(s){const e=$r.exec(s);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?qe(+e[5]):ue(+e[5]));const i=ai(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=Hr(i,a,o):e[1]==="hsv"?n=Br(i,a,o):n=Ss(i,a,o),{r:n[0],g:n[1],b:n[2],a:t}}function Yr(s,e){var t=js(s);t[0]=ai(t[0]+e),t=Ss(t),s.r=t[0],s.g=t[1],s.b=t[2]}function qr(s){if(!s)return;const e=js(s),t=e[0],n=qs(e[1]),i=qs(e[2]);return s.a<255?`hsla(${t}, ${n}%, ${i}%, ${ae(s.a)})`:`hsl(${t}, ${n}%, ${i}%)`}const Ks={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gs={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Kr(){const s={},e=Object.keys(Gs),t=Object.keys(Ks);let n,i,a,o,c;for(n=0;n<e.length;n++){for(o=c=e[n],i=0;i<t.length;i++)a=t[i],c=c.replace(a,Ks[a]);a=parseInt(Gs[o],16),s[c]=[a>>16&255,a>>8&255,a&255]}return s}let ft;function Gr(s){ft||(ft=Kr(),ft.transparent=[0,0,0,0]);const e=ft[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Xr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Qr(s){const e=Xr.exec(s);let t=255,n,i,a;if(e){if(e[7]!==n){const o=+e[7];t=e[8]?qe(o):he(o*255,0,255)}return n=+e[1],i=+e[3],a=+e[5],n=255&(e[2]?qe(n):he(n,0,255)),i=255&(e[4]?qe(i):he(i,0,255)),a=255&(e[6]?qe(a):he(a,0,255)),{r:n,g:i,b:a,a:t}}}function Zr(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${ae(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Zt=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,De=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Jr(s,e,t){const n=De(ae(s.r)),i=De(ae(s.g)),a=De(ae(s.b));return{r:ue(Zt(n+t*(De(ae(e.r))-n))),g:ue(Zt(i+t*(De(ae(e.g))-i))),b:ue(Zt(a+t*(De(ae(e.b))-a))),a:s.a+t*(e.a-s.a)}}function mt(s,e,t){if(s){let n=js(s);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=Ss(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function ri(s,e){return s&&Object.assign(e||{},s)}function Xs(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=ue(s[3]))):(e=ri(s,{r:0,g:0,b:0,a:1}),e.a=ue(e.a)),e}function eo(s){return s.charAt(0)==="r"?Qr(s):Vr(s)}class et{constructor(e){if(e instanceof et)return e;const t=typeof e;let n;t==="object"?n=Xs(e):t==="string"&&(n=Lr(e)||Gr(e)||eo(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=ri(this._rgb);return e&&(e.a=ae(e.a)),e}set rgb(e){this._rgb=Xs(e)}rgbString(){return this._valid?Zr(this._rgb):void 0}hexString(){return this._valid?Fr(this._rgb):void 0}hslString(){return this._valid?qr(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let a;const o=t===a?.5:t,c=2*o-1,l=n.a-i.a,d=((c*l===-1?c:(c+l)/(1+c*l))+1)/2;a=1-d,n.r=255&d*n.r+a*i.r+.5,n.g=255&d*n.g+a*i.g+.5,n.b=255&d*n.b+a*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=Jr(this._rgb,e._rgb,t)),this}clone(){return new et(this.rgb)}alpha(e){return this._rgb.a=ue(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=at(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mt(this._rgb,2,e),this}darken(e){return mt(this._rgb,2,-e),this}saturate(e){return mt(this._rgb,1,e),this}desaturate(e){return mt(this._rgb,1,-e),this}rotate(e){return Yr(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */const to=(()=>{let s=0;return()=>s++})();function H(s){return s==null}function Y(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function E(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function ce(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function te(s,e){return ce(s)?s:e}function U(s,e){return typeof s>"u"?e:s}const so=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function z(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function V(s,e,t,n){let i,a,o;if(Y(s))for(a=s.length,i=0;i<a;i++)e.call(t,s[i],i);else if(E(s))for(o=Object.keys(s),a=o.length,i=0;i<a;i++)e.call(t,s[o[i]],o[i])}function Qs(s,e){let t,n,i,a;if(!s||!e||s.length!==e.length)return!1;for(t=0,n=s.length;t<n;++t)if(i=s[t],a=e[t],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function Et(s){if(Y(s))return s.map(Et);if(E(s)){const e=Object.create(null),t=Object.keys(s),n=t.length;let i=0;for(;i<n;++i)e[t[i]]=Et(s[t[i]]);return e}return s}function oi(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function no(s,e,t,n){if(!oi(s))return;const i=e[s],a=t[s];E(i)&&E(a)?tt(i,a,n):e[s]=Et(a)}function tt(s,e,t){const n=Y(e)?e:[e],i=n.length;if(!E(s))return s;t=t||{};const a=t.merger||no;let o;for(let c=0;c<i;++c){if(o=n[c],!E(o))continue;const l=Object.keys(o);for(let d=0,h=l.length;d<h;++d)a(l[d],s,o,t)}return s}function Xe(s,e){return tt(s,e,{merger:io})}function io(s,e,t){if(!oi(s))return;const n=e[s],i=t[s];E(n)&&E(i)?Xe(n,i):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=Et(i))}const Zs={"":s=>s,x:s=>s.x,y:s=>s.y};function ao(s){const e=s.split("."),t=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function ro(s){const e=ao(s);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function It(s,e){return(Zs[e]||(Zs[e]=ro(e)))(s)}function Ns(s){return s.charAt(0).toUpperCase()+s.slice(1)}const At=s=>typeof s<"u",fe=s=>typeof s=="function",Js=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function oo(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Le=Math.PI,Ie=2*Le,Lt=Number.POSITIVE_INFINITY,Rt=Le/2,en=Math.sign;function co(s){const e=[],t=Math.sqrt(s);let n;for(n=1;n<t;n++)s%n===0&&(e.push(n),e.push(s/n));return t===(t|0)&&e.push(t),e.sort((i,a)=>i-a).pop(),e}function lo(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function st(s){return!lo(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function Ke(s){return s*(Le/180)}function ho(s){return s*(180/Le)}function uo(s,e){const t=e.x-s.x,n=e.y-s.y,i=Math.sqrt(t*t+n*n);let a=Math.atan2(n,t);return a<-.5*Le&&(a+=Ie),{angle:a,distance:i}}function pe(s){return(s%Ie+Ie)%Ie}function fo(s,e,t,n){const i=pe(s),a=pe(e),o=pe(t),c=pe(a-i),l=pe(o-i),d=pe(i-a),h=pe(i-o);return i===a||i===o||n||c>l&&d<h}function oe(s,e,t){return Math.max(e,Math.min(t,s))}function mo(s){return oe(s,-32768,32767)}function ks(s,e,t){t=t||(o=>s[o]<e);let n=s.length-1,i=0,a;for(;n-i>1;)a=i+n>>1,t(a)?i=a:n=a;return{lo:i,hi:n}}const we=(s,e,t,n)=>ks(s,t,n?i=>{const a=s[i][e];return a<t||a===t&&s[i+1][e]===t}:i=>s[i][e]<t),go=(s,e,t)=>ks(s,t,n=>s[n][e]>=t);function po(s,e,t){let n=0,i=s.length;for(;n<i&&s[n]<e;)n++;for(;i>n&&s[i-1]>t;)i--;return n>0||i<s.length?s.slice(n,i):s}const ci=["push","pop","shift","splice","unshift"];function xo(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ci.forEach(t=>{const n="_onData"+Ns(t),i=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...a){const o=i.apply(this,a);return s._chartjs.listeners.forEach(c=>{typeof c[n]=="function"&&c[n](...a)}),o}})})}function tn(s,e){const t=s._chartjs;if(!t)return;const n=t.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(ci.forEach(a=>{delete s[a]}),delete s._chartjs)}function vo(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const li=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function di(s,e){let t=[],n=!1;return function(...i){t=i,n||(n=!0,li.call(window,()=>{n=!1,s.apply(e,t)}))}}function bo(s,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(s,e,n)):s.apply(this,n),e}}const yo=s=>s==="start"?"left":s==="end"?"right":"center",sn=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2;function _o(s,e,t){const n=e.length;let i=0,a=n;if(s._sorted){const{iScale:o,vScale:c,_parsed:l}=s,d=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,h=o.axis,{min:u,max:f,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(we(l,h,u).lo,t?n:we(e,h,o.getPixelForValue(u)).lo),d){const p=l.slice(0,i+1).reverse().findIndex(g=>!H(g[c.axis]));i-=Math.max(0,p)}i=oe(i,0,n-1)}if(y){let p=Math.max(we(l,o.axis,f,!0).hi+1,t?0:we(e,h,o.getPixelForValue(f),!0).hi+1);if(d){const g=l.slice(p-1).findIndex(x=>!H(x[c.axis]));p+=Math.max(0,g)}a=oe(p,i,n)-i}else a=n-i}return{start:i,count:a}}function jo(s){const{xScale:e,yScale:t,_scaleRanges:n}=s,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return s._scaleRanges=i,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,i),a}const gt=s=>s===0||s===1,nn=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*Ie/t)),an=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*Ie/t)+1,Qe={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Rt)+1,easeOutSine:s=>Math.sin(s*Rt),easeInOutSine:s=>-.5*(Math.cos(Le*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>gt(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>gt(s)?s:nn(s,.075,.3),easeOutElastic:s=>gt(s)?s:an(s,.075,.3),easeInOutElastic(s){return gt(s)?s:s<.5?.5*nn(s*2,.1125,.45):.5+.5*an(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-Qe.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Qe.easeInBounce(s*2)*.5:Qe.easeOutBounce(s*2-1)*.5+.5};function hi(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rn(s){return hi(s)?s:new et(s)}function Jt(s){return hi(s)?s:new et(s).saturate(.5).darken(.1).hexString()}const wo=["x","y","borderWidth","radius","tension"],So=["color","borderColor","backgroundColor"];function No(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:So},numbers:{type:"number",properties:wo}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ko(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const To={values(s){return Y(s)?s:""+s}};var Mo={formatters:To};function Co(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Mo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Te=Object.create(null),xs=Object.create(null);function Ze(s,e){if(!e)return s;const t=e.split(".");for(let n=0,i=t.length;n<i;++n){const a=t[n];s=s[a]||(s[a]=Object.create(null))}return s}function es(s,e,t){return typeof e=="string"?tt(Ze(s,e),t):tt(Ze(s,""),e)}class Oo{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Jt(i.backgroundColor),this.hoverBorderColor=(n,i)=>Jt(i.borderColor),this.hoverColor=(n,i)=>Jt(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return es(this,e,t)}get(e){return Ze(this,e)}describe(e,t){return es(xs,e,t)}override(e,t){return es(Te,e,t)}route(e,t,n,i){const a=Ze(this,e),o=Ze(this,n),c="_"+t;Object.defineProperties(a,{[c]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[c],d=o[i];return E(l)?Object.assign({},d,l):U(l,d)},set(l){this[c]=l}}})}apply(e){e.forEach(t=>t(this))}}var W=new Oo({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[No,ko,Co]);function Po(s){return!s||H(s.size)||H(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function on(s,e,t,n,i){let a=e[i];return a||(a=e[i]=s.measureText(i).width,t.push(i)),a>n&&(n=a),n}function xe(s,e,t){const n=s.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*n)/n+i}function cn(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function ui(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function fi(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function mi(s){s.restore()}function Do(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),H(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function Eo(s,e,t,n,i){if(i.strikethrough||i.underline){const a=s.measureText(n),o=e-a.actualBoundingBoxLeft,c=e+a.actualBoundingBoxRight,l=t-a.actualBoundingBoxAscent,d=t+a.actualBoundingBoxDescent,h=i.strikethrough?(l+d)/2:d;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=i.decorationWidth||2,s.moveTo(o,h),s.lineTo(c,h),s.stroke()}}function Io(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function ln(s,e,t,n,i,a={}){const o=Y(e)?e:[e],c=a.strokeWidth>0&&a.strokeColor!=="";let l,d;for(s.save(),s.font=i.string,Do(s,a),l=0;l<o.length;++l)d=o[l],a.backdrop&&Io(s,a.backdrop),c&&(a.strokeColor&&(s.strokeStyle=a.strokeColor),H(a.strokeWidth)||(s.lineWidth=a.strokeWidth),s.strokeText(d,t,n,a.maxWidth)),s.fillText(d,t,n,a.maxWidth),Eo(s,t,n,d,a),n+=Number(i.lineHeight);s.restore()}const Ao=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Lo=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ro(s,e){const t=(""+s).match(Ao);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const Fo=s=>+s||0;function $o(s,e){const t={},n=E(e),i=n?Object.keys(e):e,a=E(s)?n?o=>U(s[o],s[e[o]]):o=>s[o]:()=>s;for(const o of i)t[o]=Fo(a(o));return t}function zo(s){return $o(s,{top:"y",right:"x",bottom:"y",left:"x"})}function nt(s){const e=zo(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vs(s,e){s=s||{},e=e||W.font;let t=U(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=U(s.style,e.style);n&&!(""+n).match(Lo)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:U(s.family,e.family),lineHeight:Ro(U(s.lineHeight,e.lineHeight),t),size:t,style:n,weight:U(s.weight,e.weight),string:""};return i.string=Po(i),i}function pt(s,e,t,n){let i,a,o;for(i=0,a=s.length;i<a;++i)if(o=s[i],o!==void 0&&o!==void 0)return o}function Uo(s,e,t){const{min:n,max:i}=s,a=so(e,(i-n)/2),o=(c,l)=>t&&c===0?0:c+l;return{min:o(n,-Math.abs(a)),max:o(i,a)}}function rt(s,e){return Object.assign(Object.create(s),e)}function Ts(s,e=[""],t,n,i=()=>s[0]){const a=t||s;typeof n>"u"&&(n=vi("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:a,_fallback:n,_getTarget:i,override:c=>Ts([c,...s],e,a,n)};return new Proxy(o,{deleteProperty(c,l){return delete c[l],delete c._keys,delete s[0][l],!0},get(c,l){return pi(c,l,()=>Go(l,e,s,c))},getOwnPropertyDescriptor(c,l){return Reflect.getOwnPropertyDescriptor(c._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(c,l){return hn(c).includes(l)},ownKeys(c){return hn(c)},set(c,l,d){const h=c._storage||(c._storage=i());return c[l]=h[l]=d,delete c._keys,!0}})}function Ae(s,e,t,n){const i={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:gi(s,n),setContext:a=>Ae(s,a,t,n),override:a=>Ae(s.override(a),e,t,n)};return new Proxy(i,{deleteProperty(a,o){return delete a[o],delete s[o],!0},get(a,o,c){return pi(a,o,()=>Ho(a,o,c))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(a,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(a,o,c){return s[o]=c,delete a[o],!0}})}function gi(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=s;return{allKeys:i,scriptable:t,indexable:n,isScriptable:fe(t)?t:()=>t,isIndexable:fe(n)?n:()=>n}}const Wo=(s,e)=>s?s+Ns(e):e,Ms=(s,e)=>E(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pi(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const n=t();return s[e]=n,n}function Ho(s,e,t){const{_proxy:n,_context:i,_subProxy:a,_descriptors:o}=s;let c=n[e];return fe(c)&&o.isScriptable(e)&&(c=Bo(e,c,s,t)),Y(c)&&c.length&&(c=Vo(e,c,s,o.isIndexable)),Ms(e,c)&&(c=Ae(c,i,a&&a[e],o)),c}function Bo(s,e,t,n){const{_proxy:i,_context:a,_subProxy:o,_stack:c}=t;if(c.has(s))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+s);c.add(s);let l=e(a,o||n);return c.delete(s),Ms(s,l)&&(l=Cs(i._scopes,i,s,l)),l}function Vo(s,e,t,n){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=t;if(typeof a.index<"u"&&n(s))return e[a.index%e.length];if(E(e[0])){const l=e,d=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const u=Cs(d,i,s,h);e.push(Ae(u,a,o&&o[s],c))}}return e}function xi(s,e,t){return fe(s)?s(e,t):s}const Yo=(s,e)=>s===!0?e:typeof s=="string"?It(e,s):void 0;function qo(s,e,t,n,i){for(const a of e){const o=Yo(t,a);if(o){s.add(o);const c=xi(o._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==n)return c}else if(o===!1&&typeof n<"u"&&t!==n)return null}return!1}function Cs(s,e,t,n){const i=e._rootScopes,a=xi(e._fallback,t,n),o=[...s,...i],c=new Set;c.add(n);let l=dn(c,o,t,a||t,n);return l===null||typeof a<"u"&&a!==t&&(l=dn(c,o,a,l,n),l===null)?!1:Ts(Array.from(c),[""],i,a,()=>Ko(e,t,n))}function dn(s,e,t,n,i){for(;t;)t=qo(s,e,t,n,i);return t}function Ko(s,e,t){const n=s._getTarget();e in n||(n[e]={});const i=n[e];return Y(i)&&E(t)?t:i||{}}function Go(s,e,t,n){let i;for(const a of e)if(i=vi(Wo(a,s),t),typeof i<"u")return Ms(s,i)?Cs(t,n,s,i):i}function vi(s,e){for(const t of e){if(!t)continue;const n=t[s];if(typeof n<"u")return n}}function hn(s){let e=s._keys;return e||(e=s._keys=Xo(s._scopes)),e}function Xo(s){const e=new Set;for(const t of s)for(const n of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function Os(){return typeof window<"u"&&typeof document<"u"}function Ps(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ft(s,e,t){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=s,n}const Ht=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Qo(s,e){return Ht(s).getPropertyValue(e)}const Zo=["top","right","bottom","left"];function Ne(s,e,t){const n={};t=t?"-"+t:"";for(let i=0;i<4;i++){const a=Zo[i];n[a]=parseFloat(s[e+"-"+a+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Jo=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function ec(s,e){const t=s.touches,n=t&&t.length?t[0]:s,{offsetX:i,offsetY:a}=n;let o=!1,c,l;if(Jo(i,a,s.target))c=i,l=a;else{const d=e.getBoundingClientRect();c=n.clientX-d.left,l=n.clientY-d.top,o=!0}return{x:c,y:l,box:o}}function ye(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:n}=e,i=Ht(t),a=i.boxSizing==="border-box",o=Ne(i,"padding"),c=Ne(i,"border","width"),{x:l,y:d,box:h}=ec(s,t),u=o.left+(h&&c.left),f=o.top+(h&&c.top);let{width:m,height:y}=e;return a&&(m-=o.width+c.width,y-=o.height+c.height),{x:Math.round((l-u)/m*t.width/n),y:Math.round((d-f)/y*t.height/n)}}function tc(s,e,t){let n,i;if(e===void 0||t===void 0){const a=s&&Ps(s);if(!a)e=s.clientWidth,t=s.clientHeight;else{const o=a.getBoundingClientRect(),c=Ht(a),l=Ne(c,"border","width"),d=Ne(c,"padding");e=o.width-d.width-l.width,t=o.height-d.height-l.height,n=Ft(c.maxWidth,a,"clientWidth"),i=Ft(c.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:n||Lt,maxHeight:i||Lt}}const xt=s=>Math.round(s*10)/10;function sc(s,e,t,n){const i=Ht(s),a=Ne(i,"margin"),o=Ft(i.maxWidth,s,"clientWidth")||Lt,c=Ft(i.maxHeight,s,"clientHeight")||Lt,l=tc(s,e,t);let{width:d,height:h}=l;if(i.boxSizing==="content-box"){const f=Ne(i,"border","width"),m=Ne(i,"padding");d-=m.width+f.width,h-=m.height+f.height}return d=Math.max(0,d-a.width),h=Math.max(0,n?d/n:h-a.height),d=xt(Math.min(d,o,l.maxWidth)),h=xt(Math.min(h,c,l.maxHeight)),d&&!h&&(h=xt(d/2)),(e!==void 0||t!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,d=xt(Math.floor(h*n))),{width:d,height:h}}function un(s,e,t){const n=e||1,i=Math.floor(s.height*n),a=Math.floor(s.width*n);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const o=s.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||o.height!==i||o.width!==a?(s.currentDevicePixelRatio=n,o.height=i,o.width=a,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const nc=function(){let s=!1;try{const e={get passive(){return s=!0,!1}};Os()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s}();function fn(s,e){const t=Qo(s,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function vt(s,e,t){return s.options.clip?s[t]:e[t]}function ic(s,e){const{xScale:t,yScale:n}=s;return t&&n?{left:vt(t,e,"left"),right:vt(t,e,"right"),top:vt(n,e,"top"),bottom:vt(n,e,"bottom")}:e}function ac(s,e){const t=e._clip;if(t.disabled)return!1;const n=ic(e,s.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:n.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class rc{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const a=t.listeners[i],o=t.duration;a.forEach(c=>c({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=li.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const a=n.items;let o=a.length-1,c=!1,l;for(;o>=0;--o)l=a[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),c=!0):(a[o]=a[a.length-1],a.pop());c&&(i.draw(),this._notify(i,n,e,"progress")),a.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ie=new rc;const mn="transparent",oc={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const n=rn(s||mn),i=n.valid&&rn(e||mn);return i&&i.valid?i.mix(n,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class cc{constructor(e,t,n,i){const a=t[n];i=pt([e.to,i,a,e.from]);const o=pt([e.from,a,i]);this._active=!0,this._fn=e.fn||oc[e.type||typeof o],this._easing=Qe[e.easing]||Qe.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],a=n-this._start,o=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=pt([e.to,t,i,e.from]),this._from=pt([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,a=this._from,o=this._loop,c=this._to;let l;if(this._active=a!==c&&(o||t<n),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=a;return}l=t/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(a,c,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class lc{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!E(e))return;const t=Object.keys(W.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!E(a))return;const o={};for(const c of t)o[c]=a[c];(Y(a.properties)&&a.properties||[i]).forEach(c=>{(c===i||!n.has(c))&&n.set(c,o)})})}_animateOptions(e,t){const n=t.options,i=hc(e,n);if(!i)return[];const a=this._createAnimations(i,n);return n.$shared&&dc(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,t){const n=this._properties,i=[],a=e.$animations||(e.$animations={}),o=Object.keys(t),c=Date.now();let l;for(l=o.length-1;l>=0;--l){const d=o[l];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const h=t[d];let u=a[d];const f=n.get(d);if(u)if(f&&u.active()){u.update(f,h,c);continue}else u.cancel();if(!f||!f.duration){e[d]=h;continue}a[d]=u=new cc(f,e,d,h),i.push(u)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return ie.add(this._chart,n),!0}}function dc(s,e){const t=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const a=s[n[i]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function hc(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function gn(s,e){const t=s&&s.options||{},n=t.reverse,i=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:n?a:i,end:n?i:a}}function uc(s,e,t){if(t===!1)return!1;const n=gn(s,t),i=gn(e,t);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function fc(s){let e,t,n,i;return E(s)?(e=s.top,t=s.right,n=s.bottom,i=s.left):e=t=n=i=s,{top:e,right:t,bottom:n,left:i,disabled:s===!1}}function bi(s,e){const t=[],n=s._getSortedDatasetMetas(e);let i,a;for(i=0,a=n.length;i<a;++i)t.push(n[i].index);return t}function pn(s,e,t,n={}){const i=s.keys,a=n.mode==="single";let o,c,l,d;if(e===null)return;let h=!1;for(o=0,c=i.length;o<c;++o){if(l=+i[o],l===t){if(h=!0,n.all)continue;break}d=s.values[l],ce(d)&&(a||e===0||en(e)===en(d))&&(e+=d)}return!h&&!n.all?0:e}function mc(s,e){const{iScale:t,vScale:n}=e,i=t.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",o=Object.keys(s),c=new Array(o.length);let l,d,h;for(l=0,d=o.length;l<d;++l)h=o[l],c[l]={[i]:h,[a]:s[h]};return c}function ts(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function gc(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function pc(s){const{min:e,max:t,minDefined:n,maxDefined:i}=s.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function xc(s,e,t){const n=s[e]||(s[e]={});return n[t]||(n[t]={})}function xn(s,e,t,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const a=s[i.index];if(t&&a>0||!t&&a<0)return i.index}return null}function vn(s,e){const{chart:t,_cachedMeta:n}=s,i=t._stacks||(t._stacks={}),{iScale:a,vScale:o,index:c}=n,l=a.axis,d=o.axis,h=gc(a,o,n),u=e.length;let f;for(let m=0;m<u;++m){const y=e[m],{[l]:p,[d]:g}=y,x=y._stacks||(y._stacks={});f=x[d]=xc(i,h,p),f[c]=g,f._top=xn(f,o,!0,n.type),f._bottom=xn(f,o,!1,n.type);const v=f._visualValues||(f._visualValues={});v[c]=g}}function ss(s,e){const t=s.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function vc(s,e){return rt(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function bc(s,e,t){return rt(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function We(s,e){const t=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){e=e||s._parsed;for(const i of e){const a=i._stacks;if(!a||a[n]===void 0||a[n][t]===void 0)return;delete a[n][t],a[n]._visualValues!==void 0&&a[n]._visualValues[t]!==void 0&&delete a[n]._visualValues[t]}}}const ns=s=>s==="reset"||s==="none",bn=(s,e)=>e?s:Object.assign({},s),yc=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:bi(t,!0),values:null};class Je{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ts(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&We(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(u,f,m,y)=>u==="x"?f:u==="r"?y:m,a=t.xAxisID=U(n.xAxisID,ss(e,"x")),o=t.yAxisID=U(n.yAxisID,ss(e,"y")),c=t.rAxisID=U(n.rAxisID,ss(e,"r")),l=t.indexAxis,d=t.iAxisID=i(l,a,o,c),h=t.vAxisID=i(l,o,a,c);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tn(this._data,this),e._stacked&&We(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(E(t)){const i=this._cachedMeta;this._data=mc(t,i)}else if(n!==t){if(n){tn(n,this);const i=this._cachedMeta;We(i),i._parsed=[]}t&&Object.isExtensible(t)&&xo(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const a=t._stacked;t._stacked=ts(t.vScale,t),t.stack!==n.stack&&(i=!0,We(t),t.stack=n.stack),this._resyncElements(e),(i||a!==t._stacked)&&(vn(this,t._parsed),t._stacked=ts(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:a,_stacked:o}=n,c=a.axis;let l=e===0&&t===i.length?!0:n._sorted,d=e>0&&n._parsed[e-1],h,u,f;if(this._parsing===!1)n._parsed=i,n._sorted=!0,f=i;else{Y(i[e])?f=this.parseArrayData(n,i,e,t):E(i[e])?f=this.parseObjectData(n,i,e,t):f=this.parsePrimitiveData(n,i,e,t);const m=()=>u[c]===null||d&&u[c]<d[c];for(h=0;h<t;++h)n._parsed[h+e]=u=f[h],l&&(m()&&(l=!1),d=u);n._sorted=l}o&&vn(this,f)}parsePrimitiveData(e,t,n,i){const{iScale:a,vScale:o}=e,c=a.axis,l=o.axis,d=a.getLabels(),h=a===o,u=new Array(i);let f,m,y;for(f=0,m=i;f<m;++f)y=f+n,u[f]={[c]:h||a.parse(d[y],y),[l]:o.parse(t[y],y)};return u}parseArrayData(e,t,n,i){const{xScale:a,yScale:o}=e,c=new Array(i);let l,d,h,u;for(l=0,d=i;l<d;++l)h=l+n,u=t[h],c[l]={x:a.parse(u[0],h),y:o.parse(u[1],h)};return c}parseObjectData(e,t,n,i){const{xScale:a,yScale:o}=e,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=new Array(i);let h,u,f,m;for(h=0,u=i;h<u;++h)f=h+n,m=t[f],d[h]={x:a.parse(It(m,c),f),y:o.parse(It(m,l),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,a=this._cachedMeta,o=t[e.axis],c={keys:bi(i,!0),values:t._stacks[e.axis]._visualValues};return pn(c,o,a.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const a=n[t.axis];let o=a===null?NaN:a;const c=i&&n._stacks[t.axis];i&&c&&(i.values=c,o=pn(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,a=n._sorted&&e===n.iScale,o=i.length,c=this._getOtherScale(e),l=yc(t,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=pc(c);let f,m;function y(){m=i[f];const p=m[c.axis];return!ce(m[e.axis])||h>p||u<p}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(d,e,m,l),a));++f);if(a){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(d,e,m,l);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,a,o;for(i=0,a=t.length;i<a;++i)o=t[i][e.axis],ce(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=fc(U(this.options.clip,uc(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],a=t.chartArea,o=[],c=this._drawStart||0,l=this._drawCount||i.length-c,d=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(e,a,c,l),h=c;h<c+l;++h){const u=i[h];u.hidden||(u.active&&d?o.push(u):u.draw(e,a))}for(h=0;h<o.length;++h)o[h].draw(e,a)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=bc(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=vc(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const i=t==="active",a=this._cachedDataOpts,o=e+"-"+t,c=a[o],l=this.enableOptionSharing&&At(n);if(c)return bn(c,l);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),u=i?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),h),m=Object.keys(W.elements[e]),y=()=>this.getContext(n,i,t),p=d.resolveNamedOptions(f,m,y,u);return p.$shared&&(p.$shared=l,a[o]=Object.freeze(bn(p,l))),p}_resolveAnimations(e,t,n){const i=this.chart,a=this._cachedDataOpts,o=`animation-${t}`,c=a[o];if(c)return c;let l;if(i.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,t),f=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(f,this.getContext(e,n,t))}const d=new lc(i,l&&l.animations);return l&&l._cacheable&&(a[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||ns(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,a=this.getSharedOptions(n),o=this.includeOptions(t,a)||a!==i;return this.updateSharedOptions(a,t,n),{sharedOptions:a,includeOptions:o}}updateElement(e,t,n,i){ns(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!ns(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const a=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[c,l,d]of this._syncList)this[c](l,d);this._syncList=[];const i=n.length,a=t.length,o=Math.min(a,i);o&&this.parse(0,o),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,t,n=!0){const i=this._cachedMeta,a=i.data,o=e+t;let c;const l=d=>{for(d.length+=t,c=d.length-1;c>=o;c--)d[c]=d[c-t]};for(l(a),c=e;c<o;++c)a[c]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),n&&this.updateElements(a,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&We(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}A(Je,"defaults",{}),A(Je,"datasetElementType",null),A(Je,"dataElementType",null);class Tt extends Je{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:a}=t,o=this.chart._animationsDisabled;let{start:c,count:l}=_o(t,i,o);this._drawStart=c,this._drawCount=l,jo(t)&&(c=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},e),this.updateElements(i,c,l,e)}updateElements(e,t,n,i){const a=i==="reset",{iScale:o,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(t,i),f=o.axis,m=c.axis,{spanGaps:y,segment:p}=this.options,g=st(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||a||i==="none",v=t+n,S=e.length;let b=t>0&&this.getParsed(t-1);for(let _=0;_<S;++_){const k=e[_],N=x?k:{};if(_<t||_>=v){N.skip=!0;continue}const O=this.getParsed(_),w=H(O[m]),T=N[f]=o.getPixelForValue(O[f],_),M=N[m]=a||w?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,O,l):O[m],_);N.skip=isNaN(T)||isNaN(M)||w,N.stop=_>0&&Math.abs(O[f]-b[f])>g,p&&(N.parsed=O,N.raw=d.data[_]),u&&(N.options=h||this.resolveDataElementOptions(_,k.active?"active":i)),x||this.updateElement(k,_,N,i),b=O}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const a=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}A(Tt,"id","line"),A(Tt,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),A(Tt,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ve(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ds{constructor(e){A(this,"options");this.options=e||{}}static override(e){Object.assign(Ds.prototype,e)}init(){}formats(){return ve()}parse(){return ve()}format(){return ve()}add(){return ve()}diff(){return ve()}startOf(){return ve()}endOf(){return ve()}}var _c={_date:Ds};function jc(s,e,t,n){const{controller:i,data:a,_sorted:o}=s,c=i._cachedMeta.iScale,l=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&a.length){const d=c._reversePixels?go:we;if(n){if(i._sharedOptions){const h=a[0],u=typeof h.getRange=="function"&&h.getRange(e);if(u){const f=d(a,e,t-u),m=d(a,e,t+u);return{lo:f.lo,hi:m.hi}}}}else{const h=d(a,e,t);if(l){const{vScale:u}=i._cachedMeta,{_parsed:f}=s,m=f.slice(0,h.lo+1).reverse().findIndex(p=>!H(p[u.axis]));h.lo-=Math.max(0,m);const y=f.slice(h.hi).findIndex(p=>!H(p[u.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:a.length-1}}function Bt(s,e,t,n,i){const a=s.getSortedVisibleDatasetMetas(),o=t[e];for(let c=0,l=a.length;c<l;++c){const{index:d,data:h}=a[c],{lo:u,hi:f}=jc(a[c],e,o,i);for(let m=u;m<=f;++m){const y=h[m];y.skip||n(y,d,m)}}}function wc(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(n,i){const a=e?Math.abs(n.x-i.x):0,o=t?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function is(s,e,t,n,i){const a=[];return!i&&!s.isPointInArea(e)||Bt(s,t,e,function(c,l,d){!i&&!ui(c,s.chartArea,0)||c.inRange(e.x,e.y,n)&&a.push({element:c,datasetIndex:l,index:d})},!0),a}function Sc(s,e,t,n){let i=[];function a(o,c,l){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:u}=uo(o,{x:e.x,y:e.y});fo(u,d,h)&&i.push({element:o,datasetIndex:c,index:l})}return Bt(s,t,e,a),i}function Nc(s,e,t,n,i,a){let o=[];const c=wc(t);let l=Number.POSITIVE_INFINITY;function d(h,u,f){const m=h.inRange(e.x,e.y,i);if(n&&!m)return;const y=h.getCenterPoint(i);if(!(!!a||s.isPointInArea(y))&&!m)return;const g=c(e,y);g<l?(o=[{element:h,datasetIndex:u,index:f}],l=g):g===l&&o.push({element:h,datasetIndex:u,index:f})}return Bt(s,t,e,d),o}function as(s,e,t,n,i,a){return!a&&!s.isPointInArea(e)?[]:t==="r"&&!n?Sc(s,e,t,i):Nc(s,e,t,n,i,a)}function yn(s,e,t,n,i){const a=[],o=t==="x"?"inXRange":"inYRange";let c=!1;return Bt(s,t,e,(l,d,h)=>{l[o]&&l[o](e[t],i)&&(a.push({element:l,datasetIndex:d,index:h}),c=c||l.inRange(e.x,e.y,i))}),n&&!c?[]:a}var kc={modes:{index(s,e,t,n){const i=ye(e,s),a=t.axis||"x",o=t.includeInvisible||!1,c=t.intersect?is(s,i,a,n,o):as(s,i,a,!1,n,o),l=[];return c.length?(s.getSortedVisibleDatasetMetas().forEach(d=>{const h=c[0].index,u=d.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:d.index,index:h})}),l):[]},dataset(s,e,t,n){const i=ye(e,s),a=t.axis||"xy",o=t.includeInvisible||!1;let c=t.intersect?is(s,i,a,n,o):as(s,i,a,!1,n,o);if(c.length>0){const l=c[0].datasetIndex,d=s.getDatasetMeta(l).data;c=[];for(let h=0;h<d.length;++h)c.push({element:d[h],datasetIndex:l,index:h})}return c},point(s,e,t,n){const i=ye(e,s),a=t.axis||"xy",o=t.includeInvisible||!1;return is(s,i,a,n,o)},nearest(s,e,t,n){const i=ye(e,s),a=t.axis||"xy",o=t.includeInvisible||!1;return as(s,i,a,t.intersect,n,o)},x(s,e,t,n){const i=ye(e,s);return yn(s,i,"x",t.intersect,n)},y(s,e,t,n){const i=ye(e,s);return yn(s,i,"y",t.intersect,n)}}};const yi=["left","top","right","bottom"];function He(s,e){return s.filter(t=>t.pos===e)}function _n(s,e){return s.filter(t=>yi.indexOf(t.pos)===-1&&t.box.axis===e)}function Be(s,e){return s.sort((t,n)=>{const i=e?n:t,a=e?t:n;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function Tc(s){const e=[];let t,n,i,a,o,c;for(t=0,n=(s||[]).length;t<n;++t)i=s[t],{position:a,options:{stack:o,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:c});return e}function Mc(s){const e={};for(const t of s){const{stack:n,pos:i,stackWeight:a}=t;if(!n||!yi.includes(i))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function Cc(s,e){const t=Mc(s),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let a,o,c;for(a=0,o=s.length;a<o;++a){c=s[a];const{fullSize:l}=c.box,d=t[c.stack],h=d&&c.stackWeight/d.weight;c.horizontal?(c.width=h?h*n:l&&e.availableWidth,c.height=i):(c.width=n,c.height=h?h*i:l&&e.availableHeight)}return t}function Oc(s){const e=Tc(s),t=Be(e.filter(d=>d.box.fullSize),!0),n=Be(He(e,"left"),!0),i=Be(He(e,"right")),a=Be(He(e,"top"),!0),o=Be(He(e,"bottom")),c=_n(e,"x"),l=_n(e,"y");return{fullSize:t,leftAndTop:n.concat(a),rightAndBottom:i.concat(l).concat(o).concat(c),chartArea:He(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:a.concat(o).concat(c)}}function jn(s,e,t,n){return Math.max(s[t],e[t])+Math.max(s[n],e[n])}function _i(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function Pc(s,e,t,n){const{pos:i,box:a}=t,o=s.maxPadding;if(!E(i)){t.size&&(s[i]-=t.size);const u=n[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?a.height:a.width),t.size=u.size/u.count,s[i]+=t.size}a.getPadding&&_i(o,a.getPadding());const c=Math.max(0,e.outerWidth-jn(o,s,"left","right")),l=Math.max(0,e.outerHeight-jn(o,s,"top","bottom")),d=c!==s.w,h=l!==s.h;return s.w=c,s.h=l,t.horizontal?{same:d,other:h}:{same:h,other:d}}function Dc(s){const e=s.maxPadding;function t(n){const i=Math.max(e[n]-s[n],0);return s[n]+=i,i}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function Ec(s,e){const t=e.maxPadding;function n(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{a[o]=Math.max(e[o],t[o])}),a}return n(s?["left","right"]:["top","bottom"])}function Ge(s,e,t,n){const i=[];let a,o,c,l,d,h;for(a=0,o=s.length,d=0;a<o;++a){c=s[a],l=c.box,l.update(c.width||e.w,c.height||e.h,Ec(c.horizontal,e));const{same:u,other:f}=Pc(e,t,c,n);d|=u&&i.length,h=h||f,l.fullSize||i.push(c)}return d&&Ge(i,e,t,n)||h}function bt(s,e,t,n,i){s.top=t,s.left=e,s.right=e+n,s.bottom=t+i,s.width=n,s.height=i}function wn(s,e,t,n){const i=t.padding;let{x:a,y:o}=e;for(const c of s){const l=c.box,d=n[c.stack]||{placed:0,weight:1},h=c.stackWeight/d.weight||1;if(c.horizontal){const u=e.w*h,f=d.size||l.height;At(d.start)&&(o=d.start),l.fullSize?bt(l,i.left,o,t.outerWidth-i.right-i.left,f):bt(l,e.left+d.placed,o,u,f),d.start=o,d.placed+=u,o=l.bottom}else{const u=e.h*h,f=d.size||l.width;At(d.start)&&(a=d.start),l.fullSize?bt(l,a,i.top,f,t.outerHeight-i.bottom-i.top):bt(l,a,e.top+d.placed,f,u),d.start=a,d.placed+=u,a=l.right}}e.x=a,e.y=o}var yt={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,n){if(!s)return;const i=nt(s.options.layout.padding),a=Math.max(e-i.width,0),o=Math.max(t-i.height,0),c=Oc(s.boxes),l=c.vertical,d=c.horizontal;V(s.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=l.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);_i(f,nt(n));const m=Object.assign({maxPadding:f,w:a,h:o,x:i.left,y:i.top},i),y=Cc(l.concat(d),u);Ge(c.fullSize,m,u,y),Ge(l,m,u,y),Ge(d,m,u,y)&&Ge(l,m,u,y),Dc(m),wn(c.leftAndTop,m,u,y),m.x+=m.w,m.y+=m.h,wn(c.rightAndBottom,m,u,y),s.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},V(c.chartArea,p=>{const g=p.box;Object.assign(g,s.chartArea),g.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class ji{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Ic extends ji{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mt="$chartjs",Ac={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Sn=s=>s===null||s==="";function Lc(s,e){const t=s.style,n=s.getAttribute("height"),i=s.getAttribute("width");if(s[Mt]={initial:{height:n,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Sn(i)){const a=fn(s,"width");a!==void 0&&(s.width=a)}if(Sn(n))if(s.style.height==="")s.height=s.width/(e||2);else{const a=fn(s,"height");a!==void 0&&(s.height=a)}return s}const wi=nc?{passive:!0}:!1;function Rc(s,e,t){s&&s.addEventListener(e,t,wi)}function Fc(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,wi)}function $c(s,e){const t=Ac[s.type]||s.type,{x:n,y:i}=ye(s,e);return{type:t,chart:e,native:s,x:n!==void 0?n:null,y:i!==void 0?i:null}}function $t(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function zc(s,e,t){const n=s.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||$t(c.addedNodes,n),o=o&&!$t(c.removedNodes,n);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Uc(s,e,t){const n=s.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||$t(c.removedNodes,n),o=o&&!$t(c.addedNodes,n);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const it=new Map;let Nn=0;function Si(){const s=window.devicePixelRatio;s!==Nn&&(Nn=s,it.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function Wc(s,e){it.size||window.addEventListener("resize",Si),it.set(s,e)}function Hc(s){it.delete(s),it.size||window.removeEventListener("resize",Si)}function Bc(s,e,t){const n=s.canvas,i=n&&Ps(n);if(!i)return;const a=di((c,l)=>{const d=i.clientWidth;t(c,l),d<i.clientWidth&&t()},window),o=new ResizeObserver(c=>{const l=c[0],d=l.contentRect.width,h=l.contentRect.height;d===0&&h===0||a(d,h)});return o.observe(i),Wc(s,a),o}function rs(s,e,t){t&&t.disconnect(),e==="resize"&&Hc(s)}function Vc(s,e,t){const n=s.canvas,i=di(a=>{s.ctx!==null&&t($c(a,s))},s);return Rc(n,e,i),i}class Yc extends ji{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Lc(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Mt])return!1;const n=t[Mt].initial;["height","width"].forEach(a=>{const o=n[a];H(o)?t.removeAttribute(a):t.setAttribute(a,o)});const i=n.style||{};return Object.keys(i).forEach(a=>{t.style[a]=i[a]}),t.width=t.width,delete t[Mt],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:zc,detach:Uc,resize:Bc}[t]||Vc;i[t]=o(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:rs,detach:rs,resize:rs}[t]||Fc)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return sc(e,t,n,i)}isAttached(e){const t=e&&Ps(e);return!!(t&&t.isConnected)}}function qc(s){return!Os()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Ic:Yc}class zt{constructor(){A(this,"x");A(this,"y");A(this,"active",!1);A(this,"options");A(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return st(this.x)&&st(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(a=>{i[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),i}}A(zt,"defaults",{}),A(zt,"defaultRoutes");function Kc(s,e){const t=s.options.ticks,n=Gc(s),i=Math.min(t.maxTicksLimit||n,n),a=t.major.enabled?Qc(e):[],o=a.length,c=a[0],l=a[o-1],d=[];if(o>i)return Zc(e,d,a,o/i),d;const h=Xc(a,e,i);if(o>0){let u,f;const m=o>1?Math.round((l-c)/(o-1)):null;for(_t(e,d,h,H(m)?0:c-m,c),u=0,f=o-1;u<f;u++)_t(e,d,h,a[u],a[u+1]);return _t(e,d,h,l,H(m)?e.length:l+m),d}return _t(e,d,h),d}function Gc(s){const e=s.options.offset,t=s._tickSize(),n=s._length/t+(e?0:1),i=s._maxLength/t;return Math.floor(Math.min(n,i))}function Xc(s,e,t){const n=Jc(s),i=e.length/t;if(!n)return Math.max(i,1);const a=co(n);for(let o=0,c=a.length-1;o<c;o++){const l=a[o];if(l>i)return l}return Math.max(i,1)}function Qc(s){const e=[];let t,n;for(t=0,n=s.length;t<n;t++)s[t].major&&e.push(t);return e}function Zc(s,e,t,n){let i=0,a=t[0],o;for(n=Math.ceil(n),o=0;o<s.length;o++)o===a&&(e.push(s[o]),i++,a=t[i*n])}function _t(s,e,t,n,i){const a=U(n,0),o=Math.min(U(i,s.length),s.length);let c=0,l,d,h;for(t=Math.ceil(t),i&&(l=i-n,t=l/Math.floor(l/t)),h=a;h<0;)c++,h=Math.round(a+c*t);for(d=Math.max(a,0);d<o;d++)d===h&&(e.push(s[d]),c++,h=Math.round(a+c*t))}function Jc(s){const e=s.length;let t,n;if(e<2)return!1;for(n=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==n)return!1;return n}const el=s=>s==="left"?"right":s==="right"?"left":s,kn=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,Tn=(s,e)=>Math.min(e||s,s);function Mn(s,e){const t=[],n=s.length/e,i=s.length;let a=0;for(;a<i;a+=n)t.push(s[Math.floor(a)]);return t}function tl(s,e,t){const n=s.ticks.length,i=Math.min(e,n-1),a=s._startPixel,o=s._endPixel,c=1e-6;let l=s.getPixelForTick(i),d;if(!(t&&(n===1?d=Math.max(l-a,o-l):e===0?d=(s.getPixelForTick(1)-l)/2:d=(l-s.getPixelForTick(i-1))/2,l+=i<e?d:-d,l<a-c||l>o+c)))return l}function sl(s,e){V(s,t=>{const n=t.gc,i=n.length/2;let a;if(i>e){for(a=0;a<i;++a)delete t.data[n[a]];n.splice(0,i)}})}function Ve(s){return s.drawTicks?s.tickLength:0}function Cn(s,e){if(!s.display)return 0;const t=vs(s.font,e),n=nt(s.padding);return(Y(s.text)?s.text.length:1)*t.lineHeight+n.height}function nl(s,e){return rt(s,{scale:e,type:"scale"})}function il(s,e,t){return rt(s,{tick:t,index:e,type:"tick"})}function al(s,e,t){let n=yo(s);return(t&&e!=="right"||!t&&e==="right")&&(n=el(n)),n}function rl(s,e,t,n){const{top:i,left:a,bottom:o,right:c,chart:l}=s,{chartArea:d,scales:h}=l;let u=0,f,m,y;const p=o-i,g=c-a;if(s.isHorizontal()){if(m=sn(n,a,c),E(t)){const x=Object.keys(t)[0],v=t[x];y=h[x].getPixelForValue(v)+p-e}else t==="center"?y=(d.bottom+d.top)/2+p-e:y=kn(s,t,e);f=c-a}else{if(E(t)){const x=Object.keys(t)[0],v=t[x];m=h[x].getPixelForValue(v)-g+e}else t==="center"?m=(d.left+d.right)/2-g+e:m=kn(s,t,e);y=sn(n,o,i),u=t==="left"?-Rt:Rt}return{titleX:m,titleY:y,maxWidth:f,rotation:u}}class Vt extends zt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=te(e,Number.POSITIVE_INFINITY),t=te(t,Number.NEGATIVE_INFINITY),n=te(n,Number.POSITIVE_INFINITY),i=te(i,Number.NEGATIVE_INFINITY),{min:te(e,n),max:te(t,i),minDefined:ce(e),maxDefined:ce(t)}}getMinMax(e){let{min:t,max:n,minDefined:i,maxDefined:a}=this.getUserBounds(),o;if(i&&a)return{min:t,max:n};const c=this.getMatchingVisibleMetas();for(let l=0,d=c.length;l<d;++l)o=c[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),a||(n=Math.max(n,o.max));return t=a&&t>n?n:t,n=i&&t>n?t:n,{min:te(t,te(n,t)),max:te(n,te(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){z(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:a,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Uo(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=c<this.ticks.length;this._convertTicksToLabels(l?Mn(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Kc(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){z(this.options.afterUpdate,[this])}beforeSetDimensions(){z(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){z(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),z(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){z(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,a;for(n=0,i=e.length;n<i;n++)a=e[n],a.label=z(t.callback,[a.value,n,e],this)}afterTickToLabelConversion(){z(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){z(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Tn(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,a=t.maxRotation;let o=i,c,l,d;if(!this._isVisible()||!t.display||i>=a||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),u=h.widest.width,f=h.highest.height,m=oe(this.chart.width-u,0,this.maxWidth);c=e.offset?this.maxWidth/n:m/(n-1),u+6>c&&(c=m/(n-(e.offset?.5:1)),l=this.maxHeight-Ve(e.grid)-t.padding-Cn(e.title,this.chart.options.font),d=Math.sqrt(u*u+f*f),o=ho(Math.min(Math.asin(oe((h.highest.height+6)/c,-1,1)),Math.asin(oe(l/d,-1,1))-Math.asin(oe(f/d,-1,1)))),o=Math.max(i,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){z(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){z(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:a}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const l=Cn(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=Ve(a)+l):(e.height=this.maxHeight,e.width=Ve(a)+l),n.display&&this.ticks.length){const{first:d,last:h,widest:u,highest:f}=this._getLabelSizes(),m=n.padding*2,y=Ke(this.labelRotation),p=Math.cos(y),g=Math.sin(y);if(c){const x=n.mirror?0:g*u.width+p*f.height;e.height=Math.min(this.maxHeight,e.height+x+m)}else{const x=n.mirror?0:p*u.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+x+m)}this._calculatePadding(d,h,g,p)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:a,padding:o},position:c}=this.options,l=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?d?(f=i*e.width,m=n*t.height):(f=n*e.height,m=i*t.width):a==="start"?m=t.width:a==="end"?f=e.width:a!=="inner"&&(f=e.width/2,m=t.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-u+o)*this.width/(this.width-u),0)}else{let h=t.height/2,u=e.height/2;a==="start"?(h=0,u=e.height):a==="end"&&(h=t.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){z(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)H(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Mn(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:a}=this,o=[],c=[],l=Math.floor(t/Tn(t,n));let d=0,h=0,u,f,m,y,p,g,x,v,S,b,_;for(u=0;u<t;u+=l){if(y=e[u].label,p=this._resolveTickFontOptions(u),i.font=g=p.string,x=a[g]=a[g]||{data:{},gc:[]},v=p.lineHeight,S=b=0,!H(y)&&!Y(y))S=on(i,x.data,x.gc,S,y),b=v;else if(Y(y))for(f=0,m=y.length;f<m;++f)_=y[f],!H(_)&&!Y(_)&&(S=on(i,x.data,x.gc,S,_),b+=v);o.push(S),c.push(b),d=Math.max(S,d),h=Math.max(b,h)}sl(a,t);const k=o.indexOf(d),N=c.indexOf(h),O=w=>({width:o[w]||0,height:c[w]||0});return{first:O(0),last:O(t-1),widest:O(k),highest:O(N),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return mo(this._alignToPixels?xe(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=il(this.getContext(),e,n))}return this.$context||(this.$context=nl(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ke(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,c=a?a.widest.width+o:0,l=a?a.highest.height+o:0;return this.isHorizontal()?l*n>c*i?c/n:l/i:l*i<c*n?l/n:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:a,position:o,border:c}=i,l=a.offset,d=this.isHorizontal(),u=this.ticks.length+(l?1:0),f=Ve(a),m=[],y=c.setContext(this.getContext()),p=y.display?y.width:0,g=p/2,x=function(B){return xe(n,B,p)};let v,S,b,_,k,N,O,w,T,M,P,L;if(o==="top")v=x(this.bottom),N=this.bottom-f,w=v-g,M=x(e.top)+g,L=e.bottom;else if(o==="bottom")v=x(this.top),M=e.top,L=x(e.bottom)-g,N=v+g,w=this.top+f;else if(o==="left")v=x(this.right),k=this.right-f,O=v-g,T=x(e.left)+g,P=e.right;else if(o==="right")v=x(this.left),T=e.left,P=x(e.right)-g,k=v+g,O=this.left+f;else if(t==="x"){if(o==="center")v=x((e.top+e.bottom)/2+.5);else if(E(o)){const B=Object.keys(o)[0],Z=o[B];v=x(this.chart.scales[B].getPixelForValue(Z))}M=e.top,L=e.bottom,N=v+g,w=N+f}else if(t==="y"){if(o==="center")v=x((e.left+e.right)/2);else if(E(o)){const B=Object.keys(o)[0],Z=o[B];v=x(this.chart.scales[B].getPixelForValue(Z))}k=v-g,O=k-f,T=e.left,P=e.right}const G=U(i.ticks.maxTicksLimit,u),R=Math.max(1,Math.ceil(u/G));for(S=0;S<u;S+=R){const B=this.getContext(S),Z=a.setContext(B),ot=c.setContext(B),ct=Z.lineWidth,Ce=Z.color,lt=ot.dash||[],Oe=ot.dashOffset,Re=Z.tickWidth,me=Z.tickColor,Fe=Z.tickBorderDash||[],ge=Z.tickBorderDashOffset;b=tl(this,S,l),b!==void 0&&(_=xe(n,b,ct),d?k=O=T=P=_:N=w=M=L=_,m.push({tx1:k,ty1:N,tx2:O,ty2:w,x1:T,y1:M,x2:P,y2:L,width:ct,color:Ce,borderDash:lt,borderDashOffset:Oe,tickWidth:Re,tickColor:me,tickBorderDash:Fe,tickBorderDashOffset:ge}))}return this._ticksLength=u,this._borderValue=v,m}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:a}=n,o=this.isHorizontal(),c=this.ticks,{align:l,crossAlign:d,padding:h,mirror:u}=a,f=Ve(n.grid),m=f+h,y=u?-h:m,p=-Ke(this.labelRotation),g=[];let x,v,S,b,_,k,N,O,w,T,M,P,L="middle";if(i==="top")k=this.bottom-y,N=this._getXAxisLabelAlignment();else if(i==="bottom")k=this.top+y,N=this._getXAxisLabelAlignment();else if(i==="left"){const R=this._getYAxisLabelAlignment(f);N=R.textAlign,_=R.x}else if(i==="right"){const R=this._getYAxisLabelAlignment(f);N=R.textAlign,_=R.x}else if(t==="x"){if(i==="center")k=(e.top+e.bottom)/2+m;else if(E(i)){const R=Object.keys(i)[0],B=i[R];k=this.chart.scales[R].getPixelForValue(B)+m}N=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")_=(e.left+e.right)/2-m;else if(E(i)){const R=Object.keys(i)[0],B=i[R];_=this.chart.scales[R].getPixelForValue(B)}N=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?L="top":l==="end"&&(L="bottom"));const G=this._getLabelSizes();for(x=0,v=c.length;x<v;++x){S=c[x],b=S.label;const R=a.setContext(this.getContext(x));O=this.getPixelForTick(x)+a.labelOffset,w=this._resolveTickFontOptions(x),T=w.lineHeight,M=Y(b)?b.length:1;const B=M/2,Z=R.color,ot=R.textStrokeColor,ct=R.textStrokeWidth;let Ce=N;o?(_=O,N==="inner"&&(x===v-1?Ce=this.options.reverse?"left":"right":x===0?Ce=this.options.reverse?"right":"left":Ce="center"),i==="top"?d==="near"||p!==0?P=-M*T+T/2:d==="center"?P=-G.highest.height/2-B*T+T:P=-G.highest.height+T/2:d==="near"||p!==0?P=T/2:d==="center"?P=G.highest.height/2-B*T:P=G.highest.height-M*T,u&&(P*=-1),p!==0&&!R.showLabelBackdrop&&(_+=T/2*Math.sin(p))):(k=O,P=(1-M)*T/2);let lt;if(R.showLabelBackdrop){const Oe=nt(R.backdropPadding),Re=G.heights[x],me=G.widths[x];let Fe=P-Oe.top,ge=0-Oe.left;switch(L){case"middle":Fe-=Re/2;break;case"bottom":Fe-=Re;break}switch(N){case"center":ge-=me/2;break;case"right":ge-=me;break;case"inner":x===v-1?ge-=me:x>0&&(ge-=me/2);break}lt={left:ge,top:Fe,width:me+Oe.width,height:Re+Oe.height,color:R.backdropColor}}g.push({label:b,font:w,textOffset:P,options:{rotation:p,color:Z,strokeColor:ot,strokeWidth:ct,textAlign:Ce,textBaseline:L,translation:[_,k],backdrop:lt}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ke(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:a}}=this.options,o=this._getLabelSizes(),c=e+a,l=o.widest.width;let d,h;return t==="left"?i?(h=this.right+a,n==="near"?d="left":n==="center"?(d="center",h+=l/2):(d="right",h+=l)):(h=this.right-c,n==="near"?d="right":n==="center"?(d="center",h-=l/2):(d="left",h=this.left)):t==="right"?i?(h=this.left+a,n==="near"?d="right":n==="center"?(d="center",h-=l/2):(d="left",h-=l)):(h=this.left+c,n==="near"?d="left":n==="center"?(d="center",h+=l/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:a,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,a,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const c=(l,d,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(t.display)for(a=0,o=i.length;a<o;++a){const l=i[a];t.drawOnChartArea&&c({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&c({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,a=n.setContext(this.getContext()),o=n.display?a.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,u,f;this.isHorizontal()?(d=xe(e,this.left,o)-o/2,h=xe(e,this.right,c)+c/2,u=f=l):(u=xe(e,this.top,o)-o/2,f=xe(e,this.bottom,c)+c/2,d=h=l),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(d,u),t.lineTo(h,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&fi(n,i);const a=this.getLabelItems(e);for(const o of a){const c=o.options,l=o.font,d=o.label,h=o.textOffset;ln(n,d,0,h,l,c)}i&&mi(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const a=vs(n.font),o=nt(n.padding),c=n.align;let l=a.lineHeight/2;t==="bottom"||t==="center"||E(t)?(l+=o.bottom,Y(n.text)&&(l+=a.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:d,titleY:h,maxWidth:u,rotation:f}=rl(this,l,t,c);ln(e,n.text,0,0,a,{color:n.color,maxWidth:u,rotation:f,textAlign:al(c,t,i),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=U(e.grid&&e.grid.z,-1),i=U(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vt.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let a,o;for(a=0,o=t.length;a<o;++a){const c=t[a];c[n]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return vs(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class jt{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;ll(t)&&(n=this.register(t));const i=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,ol(e,o,n),this.override&&W.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in W[i]&&(delete W[i][n],this.override&&delete Te[n])}}function ol(s,e,t){const n=tt(Object.create(null),[t?W.get(t):{},W.get(e),s.defaults]);W.set(e,n),s.defaultRoutes&&cl(e,s.defaultRoutes),s.descriptors&&W.describe(e,s.descriptors)}function cl(s,e){Object.keys(e).forEach(t=>{const n=t.split("."),i=n.pop(),a=[s].concat(n).join("."),o=e[t].split("."),c=o.pop(),l=o.join(".");W.route(a,i,l,c)})}function ll(s){return"id"in s&&"defaults"in s}class dl{constructor(){this.controllers=new jt(Je,"datasets",!0),this.elements=new jt(zt,"elements"),this.plugins=new jt(Object,"plugins"),this.scales=new jt(Vt,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(i=>{const a=n||this._getRegistryForType(i);n||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):V(i,o=>{const c=n||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,t,n){const i=Ns(e);z(n["before"+i],[],n),t[e](n),z(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var se=new dl;class hl{constructor(){this._init=[]}notify(e,t,n,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(a,e,t,n);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,i){i=i||{};for(const a of e){const o=a.plugin,c=o[n],l=[t,i,a.options];if(z(c,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){H(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=U(n.options&&n.options.plugins,{}),a=ul(n);return i===!1&&!t?[]:ml(e,a,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(a,o)=>a.filter(c=>!o.some(l=>c.plugin.id===l.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function ul(s){const e={},t=[],n=Object.keys(se.plugins.items);for(let a=0;a<n.length;a++)t.push(se.getPlugin(n[a]));const i=s.plugins||[];for(let a=0;a<i.length;a++){const o=i[a];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function fl(s,e){return!e&&s===!1?null:s===!0?{}:s}function ml(s,{plugins:e,localIds:t},n,i){const a=[],o=s.getContext();for(const c of e){const l=c.id,d=fl(n[l],i);d!==null&&a.push({plugin:c,options:gl(s.config,{plugin:c,local:t[l]},d,o)})}return a}function gl(s,{plugin:e,local:t},n,i){const a=s.pluginScopeKeys(e),o=s.getOptionScopes(n,a);return t&&e.defaults&&o.push(e.defaults),s.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bs(s,e){const t=W.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function pl(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function xl(s,e){return s===e?"_index_":"_value_"}function On(s){if(s==="x"||s==="y"||s==="r")return s}function vl(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function ys(s,...e){if(On(s))return s;for(const t of e){const n=t.axis||vl(t.position)||s.length>1&&On(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Pn(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function bl(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(t.length)return Pn(s,"x",t[0])||Pn(s,"y",t[0])}return{}}function yl(s,e){const t=Te[s.type]||{scales:{}},n=e.scales||{},i=bs(s.type,e),a=Object.create(null);return Object.keys(n).forEach(o=>{const c=n[o];if(!E(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ys(o,c,bl(o,s),W.scales[c.type]),d=xl(l,i),h=t.scales||{};a[o]=Xe(Object.create(null),[{axis:l},c,h[l],h[d]])}),s.data.datasets.forEach(o=>{const c=o.type||s.type,l=o.indexAxis||bs(c,e),h=(Te[c]||{}).scales||{};Object.keys(h).forEach(u=>{const f=pl(u,l),m=o[f+"AxisID"]||f;a[m]=a[m]||Object.create(null),Xe(a[m],[{axis:f},n[m],h[u]])})}),Object.keys(a).forEach(o=>{const c=a[o];Xe(c,[W.scales[c.type],W.scale])}),a}function Ni(s){const e=s.options||(s.options={});e.plugins=U(e.plugins,{}),e.scales=yl(s,e)}function ki(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function _l(s){return s=s||{},s.data=ki(s.data),Ni(s),s}const Dn=new Map,Ti=new Set;function wt(s,e){let t=Dn.get(s);return t||(t=e(),Dn.set(s,t),Ti.add(t)),t}const Ye=(s,e,t)=>{const n=It(e,t);n!==void 0&&s.add(n)};class jl{constructor(e){this._config=_l(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ki(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ni(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wt(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return wt(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return wt(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return wt(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return(!i||t)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:a}=this,o=this._cachedScopes(e,n),c=o.get(t);if(c)return c;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(u=>Ye(l,e,u))),h.forEach(u=>Ye(l,i,u)),h.forEach(u=>Ye(l,Te[a]||{},u)),h.forEach(u=>Ye(l,W,u)),h.forEach(u=>Ye(l,xs,u))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),Ti.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Te[t]||{},W.datasets[t]||{},{type:t},W,xs]}resolveNamedOptions(e,t,n,i=[""]){const a={$shared:!0},{resolver:o,subPrefixes:c}=En(this._resolverCache,e,i);let l=o;if(Sl(o,t)){a.$shared=!1,n=fe(n)?n():n;const d=this.createResolver(e,n,c);l=Ae(o,n,d)}for(const d of t)a[d]=l[d];return a}createResolver(e,t,n=[""],i){const{resolver:a}=En(this._resolverCache,e,n);return E(t)?Ae(a,t,void 0,i):a}}function En(s,e,t){let n=s.get(e);n||(n=new Map,s.set(e,n));const i=t.join();let a=n.get(i);return a||(a={resolver:Ts(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},n.set(i,a)),a}const wl=s=>E(s)&&Object.getOwnPropertyNames(s).some(e=>fe(s[e]));function Sl(s,e){const{isScriptable:t,isIndexable:n}=gi(s);for(const i of e){const a=t(i),o=n(i),c=(o||a)&&s[i];if(a&&(fe(c)||wl(c))||o&&Y(c))return!0}return!1}var Nl="4.5.0";const kl=["top","bottom","left","right","chartArea"];function In(s,e){return s==="top"||s==="bottom"||kl.indexOf(s)===-1&&e==="x"}function An(s,e){return function(t,n){return t[s]===n[s]?t[e]-n[e]:t[s]-n[s]}}function Ln(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),z(t&&t.onComplete,[s],e)}function Tl(s){const e=s.chart,t=e.options.animation;z(t&&t.onProgress,[s],e)}function Mi(s){return Os()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Ct={},Rn=s=>{const e=Mi(s);return Object.values(Ct).filter(t=>t.canvas===e).pop()};function Ml(s,e,t){const n=Object.keys(s);for(const i of n){const a=+i;if(a>=e){const o=s[i];delete s[i],(t>0||a>e)&&(s[a+t]=o)}}}function Cl(s,e,t,n){return!t||s.type==="mouseout"?null:n?e:s}var de;let Es=(de=class{static register(...e){se.add(...e),Fn()}static unregister(...e){se.remove(...e),Fn()}constructor(e,t){const n=this.config=new jl(t),i=Mi(e),a=Rn(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||qc(i)),this.platform.updateConfig(n);const c=this.platform.acquireContext(i,o.aspectRatio),l=c&&c.canvas,d=l&&l.height,h=l&&l.width;if(this.id=to(),this.ctx=c,this.canvas=l,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new hl,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bo(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],Ct[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ie.listen(this,"complete",Ln),ie.listen(this,"progress",Tl),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:a}=this;return H(e)?t&&a?a:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return se}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():un(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return cn(this.canvas,this.ctx),this}stop(){return ie.stop(this),this}resize(e,t){ie.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,a),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,un(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),z(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};V(t,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((o,c)=>(o[c]=!1,o),{});let a=[];t&&(a=a.concat(Object.keys(t).map(o=>{const c=t[o],l=ys(o,c),d=l==="r",h=l==="x";return{options:c,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),V(a,o=>{const c=o.options,l=c.id,d=ys(l,c),h=U(c.type,o.dtype);(c.position===void 0||In(c.position,d)!==In(o.dposition))&&(c.position=o.dposition),i[l]=!0;let u=null;if(l in n&&n[l].type===h)u=n[l];else{const f=se.getScale(h);u=new f({id:l,type:h,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(c,e)}),V(i,(o,c)=>{o||delete n[c]}),V(n,o=>{yt.configure(this,o,o.options),yt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((i,a)=>i.index-a.index),n>t){for(let i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(An("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,i)=>{t.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const a=t[n];let o=this.getDatasetMeta(n);const c=a.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=c,o.indexAxis=a.indexAxis||bs(c,this.options),o.order=a.order||0,o.index=n,o.label=""+a.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=se.getController(c),{datasetElementType:d,dataElementType:h}=W.datasets[c];Object.assign(l,{dataElementType:se.getElement(h),datasetElementType:d&&se.getElement(d)}),o.controller=new l(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){V(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:u}=this.getDatasetMeta(d),f=!i&&a.indexOf(u)===-1;u.buildOrUpdateElements(f),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||V(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(An("z","_idx"));const{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){V(this.scales,e=>{yt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Js(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:a}of t){const o=n==="_removeElements"?-a:a;Ml(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=a=>new Set(e.filter(o=>o[0]===a).map((o,c)=>c+","+o.splice(1).join(","))),i=n(0);for(let a=1;a<t;a++)if(!Js(i,n(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;yt.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],V(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,fe(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ie.has(this)?this.attached&&!ie.running(this)&&ie.start(this):(this.draw(),Ln({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,a;for(i=0,a=t.length;i<a;++i){const o=t[i];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=ac(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&fi(t,i),e.controller.draw(),i&&mi(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ui(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const a=kc.modes[t];return typeof a=="function"?a(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(a=>a&&a._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=rt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,i);At(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(a,{visible:n}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ie.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),cn(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ct[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(a,o)=>{t.addEventListener(this,a,o),e[a]=o},i=(a,o,c)=>{a.offsetX=o,a.offsetY=c,this._eventHandler(a)};V(this.options.events,a=>n(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(l,d)=>{t.addEventListener(this,l,d),e[l]=d},i=(l,d)=>{e[l]&&(t.removeEventListener(this,l,d),delete e[l])},a=(l,d)=>{this.canvas&&this.resize(l,d)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),n("resize",a),n("detach",o)};o=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),n("attach",c)},t.isAttached(this.canvas)?c():o()}unbindEvents(){V(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},V(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let a,o,c,l;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),c=0,l=e.length;c<l;++c){o=e[c];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:a,index:o})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[o],index:o}});!Qs(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const i=this.options.hover,a=(l,d)=>l.filter(h=>!d.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=a(t,e),c=n?e:a(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const a=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(a||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:a}=this,o=t,c=this._getActiveElements(e,i,n,o),l=oo(e),d=Cl(e,this._lastEvent,n,l);n&&(this._lastEvent=null,z(a.onHover,[e,c,this],this),l&&z(a.onClick,[e,c,this],this));const h=!Qs(c,i);return(h||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=d,h}_getActiveElements(e,t,n,i){if(e.type==="mouseout")return[];if(!n)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}},A(de,"defaults",W),A(de,"instances",Ct),A(de,"overrides",Te),A(de,"registry",se),A(de,"version",Nl),A(de,"getChart",Rn),de);function Fn(){return V(Es.instances,s=>s._plugins.invalidate())}const Yt={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},X=Object.keys(Yt);function $n(s,e){return s-e}function zn(s,e){if(H(e))return null;const t=s._adapter,{parser:n,round:i,isoWeekday:a}=s._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),ce(o)||(o=typeof n=="string"?t.parse(o,n):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(st(a)||a===!0)?t.startOf(o,"isoWeek",a):t.startOf(o,i)),+o)}function Un(s,e,t,n){const i=X.length;for(let a=X.indexOf(s);a<i-1;++a){const o=Yt[X[a]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(c*o.size))<=n)return X[a]}return X[i-1]}function Ol(s,e,t,n,i){for(let a=X.length-1;a>=X.indexOf(t);a--){const o=X[a];if(Yt[o].common&&s._adapter.diff(i,n,o)>=e-1)return o}return X[t?X.indexOf(t):0]}function Pl(s){for(let e=X.indexOf(s)+1,t=X.length;e<t;++e)if(Yt[X[e]].common)return X[e]}function Wn(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:n,hi:i}=ks(t,e),a=t[n]>=e?t[n]:t[i];s[a]=!0}}function Dl(s,e,t,n){const i=s._adapter,a=+i.startOf(e[0].value,n),o=e[e.length-1].value;let c,l;for(c=a;c<=o;c=+i.add(c,1,n))l=t[c],l>=0&&(e[l].major=!0);return e}function Hn(s,e,t){const n=[],i={},a=e.length;let o,c;for(o=0;o<a;++o)c=e[o],i[c]=o,n.push({value:c,major:!1});return a===0||!t?n:Dl(s,n,i,t)}class Ut extends Vt{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),i=this._adapter=new _c._date(e.adapters.date);i.init(t),Xe(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:zn(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:a,minDefined:o,maxDefined:c}=this.getUserBounds();function l(d){!o&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!c&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!o||!c)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ce(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),a=ce(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,o=this.max,c=po(i,a,o);return this._unit=t.unit||(n.autoSkip?Un(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):Ol(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Pl(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),Hn(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=oe(t,0,o),n=oe(n,0,o),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,a=i.time,o=a.unit||Un(a.minUnit,t,n,this._getLabelCapacity(t)),c=U(i.ticks.stepSize,1),l=o==="week"?a.isoWeekday:!1,d=st(l)||l===!0,h={};let u=t,f,m;if(d&&(u=+e.startOf(u,"isoWeek",l)),u=+e.startOf(u,d?"day":o),e.diff(n,t,o)>1e5*c)throw new Error(t+" and "+n+" are too far apart with stepSize of "+c+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=u,m=0;f<n;f=+e.add(f,c,o),m++)Wn(h,f,y);return(f===n||i.bounds==="ticks"||m===1)&&Wn(h,f,y),Object.keys(h).sort($n).map(p=>+p)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,a=this._unit,o=t||i[a];return this._adapter.format(e,o)}_tickFormatFunction(e,t,n,i){const a=this.options,o=a.ticks.callback;if(o)return z(o,[e,t,n],this);const c=a.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&c[l],u=d&&c[d],f=n[t],m=d&&u&&f&&f.major;return this._adapter.format(e,i||(m?u:h))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Ke(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:n*a+c*o,h:n*o+c*a}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,Hn(this,[e],this._majorUnit),i),o=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,n=i.length;t<n;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(zn(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vo(e.sort($n))}}A(Ut,"id","time"),A(Ut,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function St(s,e,t){let n=0,i=s.length-1,a,o,c,l;t?(e>=s[n].pos&&e<=s[i].pos&&({lo:n,hi:i}=we(s,"pos",e)),{pos:a,time:c}=s[n],{pos:o,time:l}=s[i]):(e>=s[n].time&&e<=s[i].time&&({lo:n,hi:i}=we(s,"time",e)),{time:a,pos:c}=s[n],{time:o,pos:l}=s[i]);const d=o-a;return d?c+(l-c)*(e-a)/d:c}class Bn extends Ut{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=St(t,this.min),this._tableRange=St(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],a=[];let o,c,l,d,h;for(o=0,c=e.length;o<c;++o)d=e[o],d>=t&&d<=n&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,c=i.length;o<c;++o)h=i[o+1],l=i[o-1],d=i[o],Math.round((h+l)/2)!==d&&a.push({time:d,pos:o/(c-1)});return a}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(St(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return St(this._table,n*this._tableRange+this._minPos,!0)}}A(Bn,"id","timeseries"),A(Bn,"defaults",Ut.defaults);const Ci="label";function Vn(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function El(s,e){const t=s.options;t&&e&&Object.assign(t,e)}function Oi(s,e){s.labels=e}function Pi(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ci;const n=[];s.datasets=e.map(i=>{const a=s.datasets.find(o=>o[t]===i[t]);return!a||!i.data||n.includes(a)?{...i}:(n.push(a),Object.assign(a,i),a)})}function Il(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ci;const t={labels:[],datasets:[]};return Oi(t,s.labels),Pi(t,s.datasets,e),t}function Al(s,e){const{height:t=150,width:n=300,redraw:i=!1,datasetIdKey:a,type:o,data:c,options:l,plugins:d=[],fallbackContent:h,updateMode:u,...f}=s,m=j.useRef(null),y=j.useRef(null),p=()=>{m.current&&(y.current=new Es(m.current,{type:o,data:Il(c,a),options:l&&{...l},plugins:d}),Vn(e,y.current))},g=()=>{Vn(e,null),y.current&&(y.current.destroy(),y.current=null)};return j.useEffect(()=>{!i&&y.current&&l&&El(y.current,l)},[i,l]),j.useEffect(()=>{!i&&y.current&&Oi(y.current.config.data,c.labels)},[i,c.labels]),j.useEffect(()=>{!i&&y.current&&c.datasets&&Pi(y.current.config.data,c.datasets,a)},[i,c.datasets]),j.useEffect(()=>{y.current&&(i?(g(),setTimeout(p)):y.current.update(u))},[i,l,c.labels,c.datasets,u]),j.useEffect(()=>{y.current&&(g(),setTimeout(p))},[o]),j.useEffect(()=>(p(),()=>g()),[]),Me.createElement("canvas",{ref:m,role:"img",height:t,width:n,...f},h)}const Ll=j.forwardRef(Al);function Rl(s,e){return Es.register(e),j.forwardRef((t,n)=>Me.createElement(Ll,{...t,ref:n,type:s}))}const Fl=Rl("line",Tt),$l="https://algoauto-9gx56.ondigitalocean.app";class zl{constructor(){this.baseURL=$l}async request(e,t={}){const n=`${this.baseURL}${e}`,i={...t,headers:{"Content-Type":"application/json",...t.headers}},a=localStorage.getItem("access_token");a&&(i.headers.Authorization=`Bearer ${a}`);try{const o=await fetch(n,i);if(!o.ok)throw o.status===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("user_info"),window.location.href="/login"),new Error(`HTTP error! status: ${o.status}`);const c=o.headers.get("content-type");return c&&c.includes("application/json")?await o.json():await o.text()}catch(o){throw console.error("API request failed:",o),o}}get(e,t={}){return this.request(e,{...t,method:"GET"})}post(e,t,n={}){return this.request(e,{...n,method:"POST",body:JSON.stringify(t)})}put(e,t,n={}){return this.request(e,{...n,method:"PUT",body:JSON.stringify(t)})}delete(e,t={}){return this.request(e,{...t,method:"DELETE"})}}const os=new zl,Ul=s=>{const[e,t]=j.useState(!1),[n,i]=j.useState(null),[a,o]=j.useState(null),[c,l]=j.useState(null),d=j.useRef(null),h=j.useRef(null),u=j.useRef(null),f=j.useRef(0),m=5,y=3e3,p=s,g=p.replace("wss://","https://").replace("ws://","http://").replace(/\/ws$/,"/ws/sse"),x=j.useCallback(()=>{var k;if(((k=d.current)==null?void 0:k.readyState)===WebSocket.OPEN){console.log("WebSocket already connected");return}try{console.log(`Attempting WebSocket connection to: ${p}`),d.current=new WebSocket(p),d.current.onopen=()=>{console.log("WebSocket connected successfully"),t(!0),l("websocket"),o(null),f.current=0},d.current.onmessage=N=>{try{const O=JSON.parse(N.data);i(O)}catch(O){console.error("Error parsing WebSocket message:",O)}},d.current.onerror=N=>{console.error("WebSocket error:",N),o("WebSocket connection error"),h.current||(console.log("WebSocket failed, attempting SSE fallback..."),v())},d.current.onclose=N=>{console.log("WebSocket disconnected"),t(!1),l(null),d.current=null,N.code!==1e3&&!h.current&&(console.log("WebSocket closed unexpectedly, attempting SSE fallback..."),v())}}catch(N){console.error("Error creating WebSocket:",N),o(N.message),v()}},[p]),v=j.useCallback(()=>{if(h.current){console.log("SSE already connected");return}try{console.log(`Attempting SSE connection to: ${g}`),h.current=new EventSource(g),h.current.onopen=()=>{console.log("SSE connected successfully"),t(!0),l("sse"),o(null),f.current=0},h.current.onmessage=k=>{try{const N=JSON.parse(k.data);i(N)}catch(N){console.error("Error parsing SSE message:",N)}},h.current.onerror=k=>{var N;console.error("SSE error:",k),o("SSE connection error"),((N=h.current)==null?void 0:N.readyState)===EventSource.CLOSED&&(console.log("SSE connection closed"),t(!1),l(null),h.current=null,S())}}catch(k){console.error("Error creating SSE connection:",k),o(k.message),S()}},[g]),S=j.useCallback(()=>{f.current<m?(f.current+=1,console.log(`Scheduling reconnection attempt ${f.current}/${m} in ${y}ms`),u.current=setTimeout(()=>{x()},y)):(console.error("Max reconnection attempts reached"),o("Unable to establish connection after multiple attempts"))},[x]),b=j.useCallback(()=>{u.current&&(clearTimeout(u.current),u.current=null),d.current&&(d.current.close(),d.current=null),h.current&&(h.current.close(),h.current=null),t(!1),l(null),o(null),f.current=0},[]),_=j.useCallback(k=>{var N;c==="websocket"&&((N=d.current)==null?void 0:N.readyState)===WebSocket.OPEN?d.current.send(JSON.stringify(k)):c==="sse"?console.log("SSE is receive-only. Use HTTP API for sending messages."):console.error("No active connection to send message")},[c]);return j.useEffect(()=>(x(),()=>{b()}),[x,b]),j.useEffect(()=>{if(!e)return;const k=setInterval(()=>{c==="websocket"&&_({type:"heartbeat"})},3e4);return()=>clearInterval(k)},[e,c,_]),{isConnected:e,lastMessage:n,error:a,sendMessage:_,disconnect:b,reconnect:x,connectionType:c}},Wl=()=>{const[s,e]=j.useState({is_active:!1,market_open:!1,connections:{},active_positions:[],active_strategies:[],risk_status:{},market_outlook:"NEUTRAL"}),[t,n]=j.useState({spot_price:0,vix:0,volume:0,bid_ask_spread:0}),[i,a]=j.useState([]),[o,c]=j.useState([]),[l,d]=j.useState({daily_pnl:0,total_trades:0,win_rate:0,active_positions:0}),[h,u]=j.useState([]);j.useRef(null);const{isConnected:f,lastMessage:m}=Ul("ws://localhost:8000/ws");j.useEffect(()=>{y(),p();const w=setInterval(()=>{y(),p()},5e3);return()=>clearInterval(w)},[]),j.useEffect(()=>{m&&g(m)},[m]);const y=async()=>{try{const w=await os.get("/api/system/status");e(w.data)}catch(w){console.error("Error fetching system status:",w)}},p=async()=>{try{const w=await os.get("/api/performance/today");d(w.data)}catch(w){console.error("Error fetching performance metrics:",w)}},g=w=>{const T=JSON.parse(w);switch(T.type){case"market_data":n(M=>({...M,...T.payload}));break;case"trade_executed":a(M=>[T.payload,...M].slice(0,20));break;case"alert":c(M=>[T.payload,...M].slice(0,10));break;case"pnl_update":u(M=>[...M,{time:new Date,value:T.payload.cumulative_pnl}].slice(-50)),d(M=>({...M,daily_pnl:T.payload.cumulative_pnl}));break;case"position_update":e(M=>({...M,active_positions:T.payload.positions}));break}},x=async()=>{try{const w=s.is_active?"/api/trading/disable":"/api/trading/enable";await os.post(w),await y()}catch(w){console.error("Error toggling trading:",w)}},v={labels:h.map(w=>Xt(w.time,"HH:mm:ss")),datasets:[{label:"P&L",data:h.map(w=>w.value),borderColor:h.length>0&&h[h.length-1].value>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)",backgroundColor:h.length>0&&h[h.length-1].value>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",tension:.1,fill:!0}]},S={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{grid:{color:"rgba(0, 0, 0, 0.05)"}}}},b=({status:w,label:T})=>{const M=()=>{switch(w){case"connected":case"active":case!0:return"bg-green-500";case"disconnected":case"inactive":case!1:return"bg-red-500";case"connecting":case"pending":return"bg-yellow-500";default:return"bg-gray-500"}};return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${M()} animate-pulse`}),r.jsx("span",{className:"text-sm text-gray-600",children:T})]})},_=({title:w,value:T,icon:M,trend:P,color:L="blue"})=>{const G=P>0?r.jsx(Qt,{className:"w-4 h-4"}):P<0?r.jsx(Ys,{className:"w-4 h-4"}):null,R=P>0?"text-green-600":P<0?"text-red-600":"text-gray-900";return r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-gray-600",children:w}),r.jsx("div",{className:`p-2 rounded bg-${L}-100`,children:Me.cloneElement(M,{className:`w-4 h-4 text-${L}-600`})})]}),r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsx("span",{className:`text-2xl font-bold ${R}`,children:T}),G&&r.jsx("div",{className:P>0?"text-green-500":"text-red-500",children:G})]})]})},k=({trade:w})=>{const T=w.pnl>0;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded ${T?"bg-green-100":"bg-red-100"}`,children:T?r.jsx(Qt,{className:"w-4 h-4 text-green-600"}):r.jsx(Ys,{className:"w-4 h-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:w.symbol}),r.jsx("div",{className:"text-xs text-gray-500",children:w.strategy})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`font-medium text-sm ${T?"text-green-600":"text-red-600"}`,children:[T?"+":"","₹",Math.abs(w.pnl).toLocaleString()]}),r.jsx("div",{className:"text-xs text-gray-500",children:Xt(new Date(w.timestamp),"HH:mm:ss")})]})]})},N=({alert:w})=>{const T=()=>{switch(w.severity){case"critical":return r.jsx(vr,{className:"w-5 h-5 text-red-500"});case"warning":return r.jsx(Mr,{className:"w-5 h-5 text-yellow-500"});case"info":return r.jsx(mr,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(pr,{className:"w-5 h-5 text-green-500"})}};return r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${w.severity==="critical"?"bg-red-50 border-red-200":w.severity==="warning"?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:[T(),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm",children:w.title}),r.jsx("div",{className:"text-xs text-gray-600 mt-1",children:w.message}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Xt(new Date(w.timestamp),"HH:mm:ss")})]})]})},O=({position:w})=>{const T=((w.current_price-w.entry_price)/w.entry_price*100).toFixed(2),M=w.unrealized_pnl>0;return r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:w.symbol}),r.jsx("p",{className:"text-sm text-gray-500",children:w.strategy})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.side==="BUY"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.side})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Entry"}),r.jsxs("p",{className:"font-medium",children:["₹",w.entry_price]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Current"}),r.jsxs("p",{className:"font-medium",children:["₹",w.current_price]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Quantity"}),r.jsx("p",{className:"font-medium",children:w.quantity})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"P&L"}),r.jsxs("p",{className:`font-medium ${M?"text-green-600":"text-red-600"}`,children:[M?"+":"","₹",w.unrealized_pnl.toLocaleString(),r.jsxs("span",{className:"text-xs ml-1",children:["(",T,"%)"]})]})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[r.jsxs("span",{children:["SL: ₹",w.stop_loss]}),r.jsxs("span",{children:["Target: ₹",w.target]})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${M?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(100,Math.max(0,(w.current_price-w.stop_loss)/(w.target-w.stop_loss)*100))}%`}})})]})]})};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Real-Time Trading Monitor"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(b,{status:s.market_open,label:s.market_open?"Market Open":"Market Closed"}),r.jsx(b,{status:f,label:f?"Live Data":"Disconnected"})]})]}),r.jsx("button",{onClick:x,className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${s.is_active?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:s.is_active?r.jsxs(r.Fragment,{children:[r.jsx(yr,{className:"w-4 h-4"}),"Stop Trading"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dr,{className:"w-4 h-4"}),"Start Trading"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsx(_,{title:"Daily P&L",value:`₹${l.daily_pnl.toLocaleString()}`,icon:r.jsx(Qt,{}),trend:l.daily_pnl}),r.jsx(_,{title:"Total Trades",value:l.total_trades,icon:r.jsx(dr,{}),color:"purple"}),r.jsx(_,{title:"Win Rate",value:`${l.win_rate.toFixed(1)}%`,icon:r.jsx(ur,{}),trend:l.win_rate-50,color:"green"}),r.jsx(_,{title:"Active Positions",value:l.active_positions,icon:r.jsx(Or,{}),color:"orange"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Spot Price"}),r.jsxs("p",{className:"text-lg font-semibold",children:["₹",t.spot_price.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"VIX"}),r.jsx("p",{className:"text-lg font-semibold",children:t.vix.toFixed(2)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Volume"}),r.jsxs("p",{className:"text-lg font-semibold",children:[(t.volume/1e6).toFixed(1),"M"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Bid-Ask Spread"}),r.jsx("p",{className:"text-lg font-semibold",children:t.bid_ask_spread.toFixed(2)})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Live P&L"}),r.jsx("div",{className:"h-64",children:r.jsx(Fl,{data:v,options:S})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"System Alerts"}),r.jsx(jr,{className:"w-5 h-5 text-blue-500 animate-pulse"})]}),r.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:o.length>0?o.map((w,T)=>r.jsx(N,{alert:w},T)):r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No alerts"})})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Positions"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.active_positions.length>0?s.active_positions.map((w,T)=>r.jsx(O,{position:w},T)):r.jsx("div",{className:"col-span-full bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"No active positions"})})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Trades"}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.length>0?i.map((w,T)=>r.jsx(k,{trade:w},T)):r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No recent trades"})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Strategies"}),r.jsx("div",{className:"space-y-3",children:s.active_strategies.map((w,T)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Sr,{className:"w-5 h-5 text-blue-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:w.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:[w.trades_today," trades • ",w.win_rate,"% win rate"]})]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.status})]},T))})]})]})]})]})},Hl=()=>{const[s,e]=j.useState({}),[t,n]=j.useState(!0);return j.useEffect(()=>{n(!1)},[]),r.jsxs("div",{className:"market-data-container",children:[r.jsx("h1",{children:"Market Data"}),r.jsxs("div",{className:"market-widgets",children:[r.jsx(Qi,{}),r.jsx(Wl,{})]})]})},Bl=()=>{const[s,e]=j.useState([]),[t,n]=j.useState(!0);return j.useEffect(()=>{n(!1)},[]),r.jsxs("div",{className:"orders-container",children:[r.jsx("h1",{children:"Orders Management"}),r.jsx("div",{className:"orders-content",children:r.jsx("p",{children:"Order management interface will be implemented here."})})]})},Nt="https://quantumcrypto-l43mb.ondigitalocean.app",Vl=()=>{var y,p,g,x,v,S;const[s,e]=j.useState({summary:{totalValue:0,totalInvestment:0,totalPnL:0,totalPnLPercent:0,dayPnL:0,dayPnLPercent:0,realizedPnL:0,unrealizedPnL:0},holdings:[],positions:[],performance:[]}),[t,n]=j.useState(!0),[i,a]=j.useState("holdings"),[o,c]=j.useState({key:null,direction:"asc"});j.useEffect(()=>{l();const b=setInterval(l,3e4);return()=>clearInterval(b)},[]);const l=async()=>{try{const[b,_,k,N]=await Promise.all([fetch(`${Nt}/api/portfolio/summary`),fetch(`${Nt}/api/portfolio/holdings`),fetch(`${Nt}/api/portfolio/positions`),fetch(`${Nt}/api/portfolio/performance`)]),O=b.ok?await b.json():{},w=_.ok?await _.json():[],T=k.ok?await k.json():[],M=N.ok?await N.json():[];e({summary:O,holdings:w,positions:T,performance:M})}catch(b){console.error("Failed to load portfolio data:",b)}finally{n(!1)}},d=b=>{let _="asc";o.key===b&&o.direction==="asc"&&(_="desc"),c({key:b,direction:_})},h=Me.useMemo(()=>{const b=i==="holdings"?s.holdings:s.positions;return o.key?[...b].sort((_,k)=>_[o.key]<k[o.key]?o.direction==="asc"?-1:1:_[o.key]>k[o.key]?o.direction==="asc"?1:-1:0):b},[s,i,o]),u=[{key:"symbol",label:"Symbol",render:(b,_)=>r.jsxs("div",{className:"symbol-cell",children:[r.jsx("strong",{children:b}),r.jsx("small",{children:_.exchange})]})},{key:"quantity",label:"Qty",align:"right"},{key:"avgPrice",label:"Avg Price",align:"right",render:b=>`₹${b.toFixed(2)}`},{key:"ltp",label:"LTP",align:"right",render:b=>`₹${b.toFixed(2)}`},{key:"currentValue",label:"Current Value",align:"right",render:b=>`₹${b.toLocaleString("en-IN")}`},{key:"pnl",label:"P&L",align:"right",render:(b,_)=>r.jsxs("div",{className:`pnl-cell ${b>=0?"positive":"negative"}`,children:[r.jsxs("div",{children:["₹",b.toLocaleString("en-IN")]}),r.jsxs("small",{children:["(",_.pnlPercent.toFixed(2),"%)"]})]})}],f=[{key:"symbol",label:"Symbol",render:(b,_)=>r.jsxs("div",{className:"symbol-cell",children:[r.jsx("strong",{children:b}),r.jsx("small",{children:_.product})]})},{key:"quantity",label:"Qty",align:"right",render:(b,_)=>r.jsxs("span",{className:b>0?"text-success":"text-error",children:[b>0?"+":"",b]})},{key:"avgPrice",label:"Avg Price",align:"right",render:b=>`₹${b.toFixed(2)}`},{key:"ltp",label:"LTP",align:"right",render:b=>`₹${b.toFixed(2)}`},{key:"pnl",label:"P&L",align:"right",render:(b,_)=>r.jsxs("div",{className:`pnl-cell ${b>=0?"positive":"negative"}`,children:[r.jsxs("div",{children:["₹",b.toLocaleString("en-IN")]}),r.jsxs("small",{children:["(",_.pnlPercent.toFixed(2),"%)"]})]})},{key:"actions",label:"Actions",render:(b,_)=>r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"btn btn-sm btn-success",children:"BUY"}),r.jsx("button",{className:"btn btn-sm btn-danger",children:"SELL"})]})}];if(t)return r.jsxs("div",{className:"portfolio-loading",children:[r.jsx(Se,{size:"large"}),r.jsx("p",{children:"Loading Portfolio..."})]});const{summary:m}=s;return r.jsxs("div",{className:"portfolio",children:[r.jsxs("div",{className:"portfolio-header",children:[r.jsx("h1",{children:"Portfolio Overview"}),r.jsxs("div",{className:"summary-actions",children:[r.jsx("button",{className:"btn btn-primary",children:"Export Report"}),r.jsx("button",{className:"btn btn-secondary",children:"Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 mb-lg",children:[r.jsx(q,{title:"Total Value",value:`₹${((y=m.totalValue)==null?void 0:y.toLocaleString("en-IN"))||"0"}`,subValue:`Investment: ₹${((p=m.totalInvestment)==null?void 0:p.toLocaleString("en-IN"))||"0"}`,icon:"💰"}),r.jsx(q,{title:"Total P&L",value:`₹${((g=m.totalPnL)==null?void 0:g.toLocaleString("en-IN"))||"0"}`,change:m.totalPnL,changePercent:m.totalPnLPercent,icon:m.totalPnL>=0?"📈":"📉",variant:m.totalPnL>=0?"success":"danger"}),r.jsx(q,{title:"Day P&L",value:`₹${((x=m.dayPnL)==null?void 0:x.toLocaleString("en-IN"))||"0"}`,change:m.dayPnL,changePercent:m.dayPnLPercent,icon:m.dayPnL>=0?"📈":"📉",variant:m.dayPnL>=0?"success":"danger"}),r.jsx(q,{title:"Realized P&L",value:`₹${((v=m.realizedPnL)==null?void 0:v.toLocaleString("en-IN"))||"0"}`,subValue:`Unrealized: ₹${((S=m.unrealizedPnL)==null?void 0:S.toLocaleString("en-IN"))||"0"}`,icon:"💵"})]}),r.jsxs("div",{className:"card mb-lg",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Portfolio Performance"}),r.jsx("div",{className:"chart-controls",children:r.jsxs("select",{className:"form-select",children:[r.jsx("option",{value:"1M",children:"1 Month"}),r.jsx("option",{value:"3M",children:"3 Months"}),r.jsx("option",{value:"6M",children:"6 Months"}),r.jsx("option",{value:"1Y",children:"1 Year"}),r.jsx("option",{value:"ALL",children:"All Time"})]})})]}),r.jsx("div",{className:"card-body",children:r.jsx(Ot,{data:s.performance,type:"area",height:300})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"tab-buttons",children:[r.jsxs("button",{className:`tab-btn ${i==="holdings"?"active":""}`,onClick:()=>a("holdings"),children:["Holdings (",s.holdings.length,")"]}),r.jsxs("button",{className:`tab-btn ${i==="positions"?"active":""}`,onClick:()=>a("positions"),children:["Positions (",s.positions.length,")"]})]}),r.jsx("div",{className:"table-actions",children:r.jsx("input",{type:"text",placeholder:"Search symbols...",className:"form-input",style:{width:"200px"}})})]}),r.jsx("div",{className:"card-body",children:r.jsx(Jn,{data:h,columns:i==="holdings"?u:f,onSort:d,sortConfig:o,emptyMessage:`No ${i} found`})})]}),r.jsxs("div",{className:"grid grid-cols-2 mt-lg",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Sector Allocation"})}),r.jsx("div",{className:"card-body",children:r.jsx(Ot,{data:[{name:"Banking",value:35},{name:"IT",value:25},{name:"Pharma",value:15},{name:"Auto",value:12},{name:"Energy",value:8},{name:"Others",value:5}],type:"pie",height:300})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Top Performers"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"top-performers",children:s.holdings.sort((b,_)=>_.pnlPercent-b.pnlPercent).slice(0,5).map((b,_)=>r.jsxs("div",{className:"performer-item",children:[r.jsxs("div",{className:"rank",children:["#",_+1]}),r.jsxs("div",{className:"symbol-info",children:[r.jsx("strong",{children:b.symbol}),r.jsx("small",{children:b.exchange})]}),r.jsxs("div",{className:`performance ${b.pnlPercent>=0?"positive":"negative"}`,children:[b.pnlPercent>=0?"+":"",b.pnlPercent.toFixed(2),"%"]})]},b.symbol))})})]})]})]})},Yl=()=>{const[s,e]=j.useState({}),[t,n]=j.useState(!0);return j.useEffect(()=>{n(!1)},[]),r.jsxs("div",{className:"risk-management-container",children:[r.jsx("h1",{children:"Risk Management"}),r.jsx("div",{className:"risk-content",children:r.jsx("p",{children:"Risk management dashboard will be implemented here."})})]})},ql=()=>{const[s,e]=j.useState({}),[t,n]=j.useState(!0);return j.useEffect(()=>{n(!1)},[]),r.jsxs("div",{className:"settings-container",children:[r.jsx("h1",{children:"Settings"}),r.jsx("div",{className:"settings-content",children:r.jsx("p",{children:"Application settings will be implemented here."})})]})},Yn="https://quantumcrypto-l43mb.ondigitalocean.app",Kl=({onLogin:s})=>{const[e,t]=j.useState("initial"),[n,i]=j.useState(!1),[a,o]=j.useState(null),[c,l]=j.useState({customerId:"",password:"",pin:""}),[d,h]=j.useState({});j.useEffect(()=>{u()},[]);const u=async()=>{try{const p=await fetch(`${Yn}/api/system/status`);if(p.ok){const g=await p.json();h(g)}}catch(p){console.error("Failed to check system status:",p)}},f=p=>{const{name:g,value:x}=p.target;l(v=>({...v,[g]:x}))},m=async p=>{p.preventDefault(),i(!0),o(null),t("connecting");try{const g=await fetch(`${Yn}/api/auth/sharekhan/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),x=await g.json();g.ok?x.success?(t("success"),s(x.user)):(o(x.message||"Authentication failed"),t("error")):(o(x.message||"Login request failed"),t("error"))}catch(g){console.error("ShareKhan authentication failed:",g),o("Connection failed. Please check your internet connection."),t("error")}finally{i(!1)}},y=()=>{t("initial"),o(null)};return r.jsxs("div",{className:"auth-container",children:[r.jsx("div",{className:"auth-background",children:r.jsx("div",{className:"auth-overlay"})}),r.jsx("div",{className:"auth-content",children:r.jsxs("div",{className:"auth-card",children:[r.jsx("div",{className:"auth-header",children:r.jsxs("div",{className:"auth-logo",children:[r.jsx("div",{className:"logo-icon",children:"SK"}),r.jsxs("div",{className:"logo-text",children:[r.jsx("h1",{children:"ShareKhan Trading"}),r.jsx("p",{children:"Professional Trading Platform"})]})]})}),r.jsxs("div",{className:"auth-body",children:[e==="initial"&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{children:"Login to ShareKhan"}),r.jsx("p",{className:"auth-subtitle",children:"Enter your ShareKhan credentials to access the trading platform"}),r.jsxs("form",{onSubmit:m,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer ID"}),r.jsx("input",{type:"text",name:"customerId",value:c.customerId,onChange:f,className:"form-input",placeholder:"Enter your Customer ID",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:c.password,onChange:f,className:"form-input",placeholder:"Enter your password",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Trading PIN"}),r.jsx("input",{type:"password",name:"pin",value:c.pin,onChange:f,className:"form-input",placeholder:"Enter your trading PIN",required:!0,maxLength:"6"})]}),r.jsx("button",{type:"submit",className:"btn btn-primary btn-lg auth-submit",disabled:n,children:n?r.jsxs(r.Fragment,{children:[r.jsx(Se,{size:"small",color:"white"}),"Connecting..."]}):"Login to ShareKhan"})]}),a&&r.jsxs("div",{className:"auth-error",children:[r.jsx("div",{className:"error-icon",children:"⚠️"}),r.jsx("div",{className:"error-message",children:a}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:y,children:"Try Again"})]})]}),e==="connecting"&&r.jsxs("div",{className:"auth-connecting",children:[r.jsx(Se,{size:"large"}),r.jsx("h3",{children:"Connecting to ShareKhan"}),r.jsx("p",{children:"Please wait while we authenticate your credentials..."}),r.jsxs("div",{className:"connecting-steps",children:[r.jsx("div",{className:"step active",children:"✓ Validating credentials"}),r.jsx("div",{className:"step",children:"⏳ Establishing connection"}),r.jsx("div",{className:"step",children:"⏳ Loading trading data"})]})]}),e==="success"&&r.jsxs("div",{className:"auth-success",children:[r.jsx("div",{className:"success-icon",children:"✅"}),r.jsx("h3",{children:"Successfully Connected!"}),r.jsx("p",{children:"Welcome to ShareKhan Trading Platform"}),r.jsx(Se,{size:"small",text:"Loading dashboard..."})]}),e==="error"&&r.jsxs("div",{className:"auth-error",children:[r.jsx("div",{className:"error-icon",children:"❌"}),r.jsx("h3",{children:"Authentication Failed"}),r.jsx("p",{children:a}),r.jsxs("div",{className:"error-actions",children:[r.jsx("button",{className:"btn btn-primary",onClick:y,children:"Try Again"}),r.jsx("button",{className:"btn btn-secondary",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})]}),r.jsxs("div",{className:"auth-footer",children:[r.jsxs("div",{className:"system-status",children:[r.jsxs("div",{className:"status-item",children:[r.jsx("span",{className:"status-label",children:"System:"}),r.jsx("span",{className:`status-value ${d.healthy?"success":"error"}`,children:d.healthy?"Online":"Offline"})]}),r.jsxs("div",{className:"status-item",children:[r.jsx("span",{className:"status-label",children:"Market:"}),r.jsx("span",{className:"status-value success",children:"Open"})]})]}),r.jsxs("div",{className:"auth-links",children:[r.jsx("a",{href:"/help",className:"auth-link",children:"Need Help?"}),r.jsx("a",{href:"/forgot-password",className:"auth-link",children:"Forgot Password?"})]})]})]})})]})},Gl=({collapsed:s,onToggle:e,user:t})=>{var i,a;Zn();const n=[{section:"Trading",items:[{path:"/dashboard",name:"Dashboard",icon:"📊",description:"Overview & Analytics"},{path:"/trading",name:"Trading",icon:"💱",description:"Place Orders"},{path:"/portfolio",name:"Portfolio",icon:"💰",description:"Holdings & P&L"},{path:"/orders",name:"Orders",icon:"📋",description:"Order History"}]},{section:"Analysis",items:[{path:"/analytics",name:"Analytics",icon:"📈",description:"Performance Analysis"},{path:"/market-data",name:"Market Data",icon:"📡",description:"Live Market Feed"},{path:"/risk",name:"Risk Management",icon:"🛡️",description:"Risk Controls"}]},{section:"System",items:[{path:"/system",name:"System Status",icon:"⚙️",description:"Health & Monitoring"},{path:"/settings",name:"Settings",icon:"🔧",description:"Configuration"}]}];return r.jsxs("div",{className:`sidebar ${s?"collapsed":""}`,children:[r.jsxs("div",{className:"sidebar-header",children:[r.jsx("div",{className:"sidebar-logo",children:"SK"}),r.jsx("div",{className:"sidebar-title",children:"ShareKhan Pro"})]}),r.jsxs("div",{className:"sidebar-user",children:[r.jsx("div",{className:"user-avatar",children:((i=t==null?void 0:t.displayName)==null?void 0:i.charAt(0))||((a=t==null?void 0:t.username)==null?void 0:a.charAt(0))||"U"}),r.jsxs("div",{className:"user-info",children:[r.jsx("div",{className:"user-name",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.username)||"User"}),r.jsx("div",{className:"user-role",children:(t==null?void 0:t.role)||"Trader"})]})]}),r.jsx("nav",{className:"sidebar-nav",children:n.map(o=>r.jsxs("div",{className:"nav-section",children:[r.jsx("div",{className:"nav-section-title",children:o.section}),o.items.map(c=>r.jsxs($i,{to:c.path,className:({isActive:l})=>`nav-item ${l?"active":""}`,title:s?c.name:"",children:[r.jsx("span",{className:"nav-item-icon",children:c.icon}),r.jsxs("div",{className:"nav-item-content",children:[r.jsx("span",{className:"nav-item-text",children:c.name}),!s&&r.jsx("span",{className:"nav-item-description",children:c.description})]})]},c.path))]},o.section))}),r.jsx("div",{className:"sidebar-footer",children:r.jsxs("div",{className:"sharekhan-status",children:[r.jsxs("div",{className:"status-indicator",children:[r.jsx("span",{className:"status-dot"}),r.jsx("span",{className:"status-text",children:"ShareKhan Connected"})]}),!s&&r.jsxs("div",{className:"status-details",children:[r.jsx("div",{children:"Session: Active"}),r.jsx("div",{children:"Market: Open"})]})]})})]})},Xl=()=>{var l,d;const[s,e]=j.useState({endpoints:[],dataConsistency:[],systemMetrics:{},lastUpdate:null}),[t,n]=j.useState(!1),i=[{name:"Autonomous Trading",url:"/api/v1/autonomous/status",critical:!0},{name:"Dashboard Summary",url:"/api/v1/dashboard/summary",critical:!0},{name:"Trading Control",url:"/api/v1/control/trading/status",critical:!1},{name:"System Status",url:"/api/v1/system/status",critical:!1},{name:"Performance API",url:"/api/v1/performance/trades",critical:!1},{name:"Market Data",url:"/api/market/indices",critical:!1}],a=async()=>{n(!0);try{console.log("🏥 Running comprehensive system health check...");const h=[],u=[];let f=null,m=null;for(const S of i)try{const b=Date.now(),_=await fetch(S.url),N=Date.now()-b;let O="healthy",w="OK";if(_.ok?N>2e3&&(O="warning",w=`Slow response (${N}ms)`):(O="error",w=`HTTP ${_.status}`),_.ok){const T=await _.json();S.name==="Autonomous Trading"?f=T:S.name==="Dashboard Summary"&&(m=T)}h.push({name:S.name,url:S.url,status:O,message:w,responseTime:N,critical:S.critical,timestamp:new Date().toISOString()})}catch(b){h.push({name:S.name,url:S.url,status:"error",message:b.message,responseTime:null,critical:S.critical,timestamp:new Date().toISOString()})}if(f&&m){const S=f.data||{},b=m.autonomous_trading||{};[{metric:"Total Trades",autonomous:S.total_trades||0,dashboard:b.total_trades||0,tolerance:0},{metric:"Daily P&L",autonomous:S.daily_pnl||0,dashboard:b.daily_pnl||0,tolerance:.01},{metric:"Trading Active",autonomous:S.is_active||!1,dashboard:b.is_active||!1,tolerance:0}].forEach(k=>{const N=Math.abs(k.autonomous-k.dashboard);let O="consistent",w="Data matches between sources";N>k.tolerance&&(O="inconsistent",w=`Mismatch: Autonomous=${k.autonomous}, Dashboard=${k.dashboard}`),u.push({metric:k.metric,status:O,message:w,autonomousValue:k.autonomous,dashboardValue:k.dashboard,difference:N})})}const y=h.filter(S=>S.status==="healthy").length,p=h.length,g=y/p*100,x=h.filter(S=>S.critical&&S.status==="error").length,v=u.filter(S=>S.status==="inconsistent").length;e({endpoints:h,dataConsistency:u,systemMetrics:{overallHealth:g,healthyEndpoints:y,totalEndpoints:p,criticalIssues:x,dataInconsistencies:v,averageResponseTime:h.filter(S=>S.responseTime).reduce((S,b)=>S+b.responseTime,0)/h.filter(S=>S.responseTime).length||0},lastUpdate:new Date}),console.log("✅ System health check completed")}catch(h){console.error("❌ System health check failed:",h)}finally{n(!1)}};j.useEffect(()=>{a();const h=setInterval(a,12e4);return()=>clearInterval(h)},[]);const o=h=>{switch(h){case"healthy":case"consistent":return"success";case"warning":return"warning";case"error":case"inconsistent":return"error";default:return"default"}},c=h=>{switch(h){case"healthy":case"consistent":return r.jsx(ds,{});case"warning":return r.jsx(Qn,{});case"error":case"inconsistent":return r.jsx(hs,{});default:return r.jsx(Xn,{})}};return r.jsxs(F,{sx:{p:3},children:[r.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[r.jsx(D,{variant:"h4",component:"h1",children:"System Health Monitor"}),r.jsxs(F,{sx:{display:"flex",gap:1,alignItems:"center"},children:[r.jsxs(D,{variant:"body2",color:"text.secondary",children:["Last updated: ",s.lastUpdate?s.lastUpdate.toLocaleTimeString():"Never"]}),r.jsx(qn,{title:"Refresh Health Check",children:r.jsx(Kn,{onClick:a,disabled:t,children:r.jsx(ls,{})})})]})]}),r.jsxs(re,{container:!0,spacing:3,sx:{mb:3},children:[r.jsx(re,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{children:r.jsxs(je,{children:[r.jsx(D,{color:"textSecondary",gutterBottom:!0,children:"Overall Health"}),r.jsxs(F,{sx:{display:"flex",alignItems:"center",mb:1},children:[r.jsxs(D,{variant:"h4",sx:{mr:1},children:[((l=s.systemMetrics.overallHealth)==null?void 0:l.toFixed(1))||0,"%"]}),s.systemMetrics.overallHealth>=80?r.jsx(ds,{color:"success"}):r.jsx(hs,{color:"error"})]}),r.jsx(_s,{variant:"determinate",value:s.systemMetrics.overallHealth||0,color:s.systemMetrics.overallHealth>=80?"success":"error"})]})})}),r.jsx(re,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{children:r.jsxs(je,{children:[r.jsx(D,{color:"textSecondary",gutterBottom:!0,children:"Endpoint Status"}),r.jsxs(D,{variant:"h4",children:[s.systemMetrics.healthyEndpoints||0,"/",s.systemMetrics.totalEndpoints||0]}),r.jsx(D,{variant:"body2",children:"Healthy endpoints"})]})})}),r.jsx(re,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{children:r.jsxs(je,{children:[r.jsx(D,{color:"textSecondary",gutterBottom:!0,children:"Critical Issues"}),r.jsx(D,{variant:"h4",color:s.systemMetrics.criticalIssues>0?"error":"success",children:s.systemMetrics.criticalIssues||0}),r.jsx(D,{variant:"body2",children:"Need immediate attention"})]})})}),r.jsx(re,{item:!0,xs:12,sm:6,md:3,children:r.jsx(_e,{children:r.jsxs(je,{children:[r.jsx(D,{color:"textSecondary",gutterBottom:!0,children:"Avg Response Time"}),r.jsxs(D,{variant:"h4",children:[((d=s.systemMetrics.averageResponseTime)==null?void 0:d.toFixed(0))||0,"ms"]}),r.jsx(D,{variant:"body2",children:"API performance"})]})})})]}),s.systemMetrics.criticalIssues>0&&r.jsxs(us,{severity:"error",sx:{mb:3},children:[r.jsx(D,{variant:"h6",gutterBottom:!0,children:"⚠️ Critical System Issues Detected"}),r.jsxs(D,{children:[s.systemMetrics.criticalIssues," critical endpoint(s) are failing. This may impact trading operations. Please investigate immediately."]})]}),s.systemMetrics.dataInconsistencies>0&&r.jsxs(us,{severity:"warning",sx:{mb:3},children:[r.jsx(D,{variant:"h6",gutterBottom:!0,children:"📊 Data Inconsistency Warning"}),r.jsxs(D,{children:[s.systemMetrics.dataInconsistencies," data inconsistency issue(s) detected. Trading data may not be accurately reflected across all interfaces."]})]}),r.jsxs(Is,{sx:{mb:3},children:[r.jsx(D,{variant:"h6",sx:{p:2},children:"Endpoint Health Status"}),r.jsx(As,{children:r.jsxs(Ls,{children:[r.jsx(Rs,{children:r.jsxs($e,{children:[r.jsx($,{children:"Service"}),r.jsx($,{children:"Status"}),r.jsx($,{children:"Response Time"}),r.jsx($,{children:"Message"}),r.jsx($,{children:"Critical"}),r.jsx($,{children:"Last Check"})]})}),r.jsx(Fs,{children:s.endpoints.map((h,u)=>r.jsxs($e,{children:[r.jsxs($,{children:[r.jsx(D,{variant:"body2",fontWeight:"bold",children:h.name}),r.jsx(D,{variant:"caption",color:"text.secondary",children:h.url})]}),r.jsx($,{children:r.jsx(Ee,{icon:c(h.status),label:h.status.toUpperCase(),color:o(h.status),size:"small"})}),r.jsx($,{children:h.responseTime?`${h.responseTime}ms`:"N/A"}),r.jsx($,{children:h.message}),r.jsx($,{children:r.jsx(Ee,{label:h.critical?"YES":"NO",color:h.critical?"error":"default",size:"small"})}),r.jsx($,{children:new Date(h.timestamp).toLocaleTimeString()})]},u))})]})})]}),r.jsxs(Is,{children:[r.jsx(D,{variant:"h6",sx:{p:2},children:"Data Consistency Checks"}),r.jsx(As,{children:r.jsxs(Ls,{children:[r.jsx(Rs,{children:r.jsxs($e,{children:[r.jsx($,{children:"Metric"}),r.jsx($,{children:"Status"}),r.jsx($,{children:"Autonomous API"}),r.jsx($,{children:"Dashboard API"}),r.jsx($,{children:"Notes"})]})}),r.jsxs(Fs,{children:[s.dataConsistency.map((h,u)=>r.jsxs($e,{children:[r.jsx($,{children:h.metric}),r.jsx($,{children:r.jsx(Ee,{icon:c(h.status),label:h.status.toUpperCase(),color:o(h.status),size:"small"})}),r.jsx($,{children:String(h.autonomousValue)}),r.jsx($,{children:String(h.dashboardValue)}),r.jsx($,{children:h.message})]},u)),s.dataConsistency.length===0&&r.jsx($e,{children:r.jsx($,{colSpan:5,align:"center",children:r.jsx(D,{color:"text.secondary",children:"No data consistency checks available. Ensure both autonomous and dashboard endpoints are responding."})})})]})]})})]})]})},Ql=()=>{const[s,e]=j.useState({overall:"unknown",components:{},lastCheck:null}),[t,n]=j.useState(!0),i=async()=>{try{const l=await(await gs(ms.HEALTH_READY_JSON.url)).json(),d=l.status==="ready"||l.status==="healthy",h={api:d?"healthy":"unhealthy",database:l.database_connected!==!1?"healthy":"unhealthy",redis:l.redis_connected!==!1?"healthy":"unhealthy",trading:l.trading_enabled?"active":"inactive"};e({overall:d?"healthy":"unhealthy",components:h,lastCheck:new Date().toISOString(),details:l})}catch(c){console.error("Error fetching health status:",c),e({overall:"error",components:{api:"error",database:"unknown",redis:"unknown",trading:"unknown"},lastCheck:new Date().toISOString(),error:c.message})}finally{n(!1)}};j.useEffect(()=>{i();const c=setInterval(i,3e4);return()=>clearInterval(c)},[]);const a=c=>{switch(c){case"healthy":case"active":return"success";case"unhealthy":case"inactive":return"error";case"warning":return"warning";default:return"default"}},o=c=>{switch(c){case"healthy":case"active":return r.jsx(ds,{color:"success"});case"unhealthy":case"inactive":return r.jsx(hs,{color:"error"});case"warning":return r.jsx(Qn,{color:"warning"});default:return r.jsx(Xn,{color:"disabled"})}};return t?r.jsx(_e,{children:r.jsx(je,{children:r.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(_s,{sx:{flex:1}}),r.jsx(D,{variant:"body2",children:"Checking system health..."})]})})}):r.jsx(_e,{children:r.jsxs(je,{children:[r.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[r.jsx(D,{variant:"h6",children:"System Health"}),r.jsx(Ee,{icon:o(s.overall),label:s.overall.toUpperCase(),color:a(s.overall),size:"small"})]}),s.error&&r.jsx(us,{severity:"error",sx:{mb:2},children:s.error}),r.jsx(re,{container:!0,spacing:2,children:Object.entries(s.components).map(([c,l])=>r.jsx(re,{item:!0,xs:6,sm:3,children:r.jsxs(F,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1,borderRadius:1,bgcolor:"background.default"},children:[o(l),r.jsx(D,{variant:"caption",sx:{mt:1,textTransform:"capitalize"},children:c}),r.jsx(D,{variant:"caption",color:"text.secondary",children:typeof l=="string"?l:String(l||"Unknown")})]})},c))}),s.lastCheck&&r.jsxs(D,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:2,textAlign:"center"},children:["Last checked: ",new Date(s.lastCheck).toLocaleTimeString()]})]})})},Zl=()=>r.jsxs("div",{className:"system-status-container",children:[r.jsx("h1",{children:"System Status"}),r.jsxs("div",{className:"system-status-content",children:[r.jsx(Xl,{}),r.jsx(Ql,{})]})]}),Jl=({user:s,systemStatus:e,connectionStatus:t,darkMode:n,onToggleTheme:i,onToggleSidebar:a,onLogout:o})=>{var S,b;const[c,l]=j.useState(!1),[d,h]=j.useState(!1),u=j.useRef(null),f=j.useRef(null),m=Zn(),y=()=>{const _=m.pathname;return{"/dashboard":"Dashboard","/trading":"Trading Terminal","/portfolio":"Portfolio","/analytics":"Analytics","/risk":"Risk Management","/market-data":"Market Data","/orders":"Order Management","/system":"System Status","/settings":"Settings"}[_]||"ShareKhan Trading"};j.useEffect(()=>{const _=k=>{u.current&&!u.current.contains(k.target)&&l(!1),f.current&&!f.current.contains(k.target)&&h(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const g=(()=>{switch(t){case"connected":return{text:"Connected",color:"success",icon:"🟢"};case"disconnected":return{text:"Disconnected",color:"error",icon:"🔴"};case"connecting":return{text:"Connecting",color:"warning",icon:"🟡"};default:return{text:"Unknown",color:"secondary",icon:"⚪"}}})(),x=[{id:1,type:"success",title:"Order Executed",message:"Buy order for RELIANCE executed at ₹2,485",time:"2 minutes ago",read:!1},{id:2,type:"warning",title:"Risk Alert",message:"Position size approaching daily limit",time:"5 minutes ago",read:!1},{id:3,type:"info",title:"Market Update",message:"NIFTY crosses 18,000 levels",time:"10 minutes ago",read:!0}],v=x.filter(_=>!_.read).length;return r.jsxs("div",{className:"topbar",children:[r.jsxs("div",{className:"topbar-left",children:[r.jsx("button",{className:"topbar-toggle",onClick:a,title:"Toggle Sidebar",children:"☰"}),r.jsx("div",{className:"topbar-breadcrumb",children:y()}),r.jsxs("div",{className:"market-status",children:[r.jsx("span",{className:"market-time",children:new Date().toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit"})}),r.jsx("span",{className:"market-session",children:"Market Open"})]})]}),r.jsxs("div",{className:"topbar-right",children:[r.jsxs("div",{className:`status-indicator ${t}`,children:[r.jsx("span",{className:"status-dot"}),r.jsx("span",{className:"status-text",children:g.text})]}),r.jsxs("div",{className:"sharekhan-status",children:[r.jsx("span",{className:"sk-icon",children:"SK"}),r.jsx("span",{className:"sk-text",children:"Connected"})]}),r.jsx("div",{className:"quick-stats",children:r.jsxs("div",{className:"stat-item",children:[r.jsx("span",{className:"stat-label",children:"NIFTY"}),r.jsx("span",{className:"stat-value text-success",children:"18,245.60"}),r.jsx("span",{className:"stat-change text-success",children:"+0.45%"})]})}),r.jsxs("div",{className:"topbar-item",ref:f,children:[r.jsxs("button",{className:"notification-btn",onClick:()=>h(!d),title:"Notifications",children:["🔔",v>0&&r.jsx("span",{className:"notification-badge",children:v})]}),d&&r.jsxs("div",{className:"notification-dropdown",children:[r.jsxs("div",{className:"dropdown-header",children:[r.jsx("h4",{children:"Notifications"}),r.jsx("span",{className:"mark-all-read",children:"Mark all read"})]}),r.jsx("div",{className:"notification-list",children:x.map(_=>r.jsxs("div",{className:`notification-item ${_.read?"read":"unread"}`,children:[r.jsxs("div",{className:`notification-type ${_.type}`,children:[_.type==="success"&&"✅",_.type==="warning"&&"⚠️",_.type==="info"&&"ℹ️"]}),r.jsxs("div",{className:"notification-content",children:[r.jsx("div",{className:"notification-title",children:_.title}),r.jsx("div",{className:"notification-message",children:_.message}),r.jsx("div",{className:"notification-time",children:_.time})]})]},_.id))}),r.jsx("div",{className:"dropdown-footer",children:r.jsx("a",{href:"/notifications",children:"View all notifications"})})]})]}),r.jsx("button",{className:"theme-toggle",onClick:i,title:`Switch to ${n?"light":"dark"} theme`,children:n?"☀️":"🌙"}),r.jsxs("div",{className:"topbar-item",ref:u,children:[r.jsxs("button",{className:"user-menu-btn",onClick:()=>l(!c),children:[r.jsx("div",{className:"user-avatar",children:((S=s==null?void 0:s.displayName)==null?void 0:S.charAt(0))||((b=s==null?void 0:s.username)==null?void 0:b.charAt(0))||"U"}),r.jsx("span",{className:"user-name",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.username)||"User"}),r.jsx("span",{className:"dropdown-arrow",children:"▼"})]}),c&&r.jsxs("div",{className:"user-dropdown",children:[r.jsx("div",{className:"dropdown-header",children:r.jsxs("div",{className:"user-info",children:[r.jsx("div",{className:"user-name",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.username)}),r.jsx("div",{className:"user-email",children:s==null?void 0:s.email}),r.jsx("div",{className:"user-role",children:(s==null?void 0:s.role)||"Trader"})]})}),r.jsxs("div",{className:"dropdown-menu",children:[r.jsx("a",{href:"/profile",className:"dropdown-item",children:"👤 Profile"}),r.jsx("a",{href:"/settings",className:"dropdown-item",children:"⚙️ Settings"}),r.jsx("a",{href:"/trading-limits",className:"dropdown-item",children:"📊 Trading Limits"}),r.jsx("a",{href:"/api-keys",className:"dropdown-item",children:"🔑 API Keys"}),r.jsx("div",{className:"dropdown-divider"}),r.jsx("a",{href:"/help",className:"dropdown-item",children:"❓ Help & Support"}),r.jsx("button",{className:"dropdown-item logout-btn",onClick:o,children:"🚪 Logout"})]})]})]})]})]})},ed=({symbol:s})=>r.jsxs("div",{className:"market-depth",children:[r.jsxs("h3",{children:["Market Depth - ",s]}),r.jsxs("div",{className:"depth-content",children:[r.jsxs("div",{className:"bids",children:[r.jsx("h4",{children:"Bids"}),r.jsx("p",{children:"Market depth data will be displayed here"})]}),r.jsxs("div",{className:"asks",children:[r.jsx("h4",{children:"Asks"}),r.jsx("p",{children:"Market depth data will be displayed here"})]})]})]}),td=({symbol:s})=>r.jsxs("div",{className:"order-book",children:[r.jsxs("h3",{children:["Order Book - ",s]}),r.jsx("div",{className:"orderbook-content",children:r.jsx("p",{children:"Order book data will be displayed here"})})]}),sd=({symbol:s,onOrderSubmit:e})=>{const[t,n]=j.useState("BUY"),[i,a]=j.useState(""),[o,c]=j.useState(""),l=d=>{d.preventDefault(),e&&e({symbol:s,orderType:t,quantity:parseInt(i),price:parseFloat(o)})};return r.jsxs("div",{className:"order-form",children:[r.jsxs("h3",{children:["Place Order - ",s]}),r.jsxs("form",{onSubmit:l,children:[r.jsxs("div",{children:[r.jsx("label",{children:"Order Type:"}),r.jsxs("select",{value:t,onChange:d=>n(d.target.value),children:[r.jsx("option",{value:"BUY",children:"Buy"}),r.jsx("option",{value:"SELL",children:"Sell"})]})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Quantity:"}),r.jsx("input",{type:"number",value:i,onChange:d=>a(d.target.value),placeholder:"Enter quantity"})]}),r.jsxs("div",{children:[r.jsx("label",{children:"Price:"}),r.jsx("input",{type:"number",value:o,onChange:d=>c(d.target.value),placeholder:"Enter price"})]}),r.jsx("button",{type:"submit",children:"Place Order"})]})]})},nd=()=>r.jsxs("div",{className:"position-monitor",children:[r.jsx("h3",{children:"Position Monitor"}),r.jsx("div",{className:"positions-content",children:r.jsx("p",{children:"Current positions will be displayed here"})})]}),id=({onSymbolSelect:s})=>{const[e,t]=j.useState(""),n=a=>{t(a.target.value)},i=a=>{s&&s(a)};return r.jsxs("div",{className:"symbol-search",children:[r.jsx("h3",{children:"Symbol Search"}),r.jsx("input",{type:"text",value:e,onChange:n,placeholder:"Search for symbols..."}),r.jsxs("div",{className:"search-results",children:[r.jsx("div",{className:"symbol-item",onClick:()=>i("RELIANCE"),children:"RELIANCE - Reliance Industries Ltd"}),r.jsx("div",{className:"symbol-item",onClick:()=>i("TCS"),children:"TCS - Tata Consultancy Services"}),r.jsx("div",{className:"symbol-item",onClick:()=>i("INFY"),children:"INFY - Infosys Limited"})]})]})},ad=({symbol:s,data:e})=>r.jsxs("div",{className:"trading-chart",children:[r.jsxs("h3",{children:["Chart - ",s]}),r.jsxs("div",{className:"chart-container",children:[r.jsx("p",{children:"Trading chart will be displayed here"}),r.jsxs("div",{style:{height:"300px",background:"linear-gradient(45deg, #2563eb, #7c3aed)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",borderRadius:"8px"},children:["📈 Trading Chart for ",s]})]})]}),kt="https://quantumcrypto-l43mb.ondigitalocean.app",rd=()=>{const[s,e]=j.useState("RELIANCE"),[t,n]=j.useState({symbol:"RELIANCE",ltp:2485.75,change:12.5,changePercent:.51,volume:1245678,high:2495,low:2465.5,open:2475.25}),[i,a]=j.useState([]),[o,c]=j.useState([]),[l,d]=j.useState(!1),[h,u]=j.useState(["RELIANCE","TCS","INFY","HDFCBANK","ICICIBANK","BHARTIARTL","ITC","KOTAKBANK","LT","ASIANPAINT"]);j.useEffect(()=>{f();const p=setInterval(f,5e3);return()=>clearInterval(p)},[s]);const f=async()=>{try{const[p,g,x]=await Promise.all([fetch(`${kt}/api/market-data/${s}`),fetch(`${kt}/api/portfolio/positions`),fetch(`${kt}/api/orders/active`)]);if(p.ok){const v=await p.json();n(v)}if(g.ok){const v=await g.json();a(v)}if(x.ok){const v=await x.json();c(v)}}catch(p){console.error("Failed to load trading data:",p)}},m=p=>{e(p)},y=async p=>{d(!0);try{const g=await fetch(`${kt}/api/orders/place`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(g.ok){const x=await g.json();return f(),{success:!0,data:x}}else return{success:!1,error:(await g.json()).message}}catch(g){return console.error("Order placement failed:",g),{success:!1,error:"Order placement failed"}}finally{d(!1)}};return r.jsxs("div",{className:"trading-terminal",children:[r.jsxs("div",{className:"trading-header",children:[r.jsxs("div",{className:"symbol-info",children:[r.jsx("h1",{className:"symbol-name",children:t.symbol}),r.jsxs("div",{className:"symbol-price",children:[r.jsxs("span",{className:"ltp",children:["₹",t.ltp.toFixed(2)]}),r.jsxs("span",{className:`change ${t.change>=0?"positive":"negative"}`,children:[t.change>=0?"+":"",t.change.toFixed(2),"(",t.changePercent.toFixed(2),"%)"]})]}),r.jsxs("div",{className:"symbol-stats",children:[r.jsxs("span",{children:["Vol: ",t.volume.toLocaleString()]}),r.jsxs("span",{children:["High: ₹",t.high.toFixed(2)]}),r.jsxs("span",{children:["Low: ₹",t.low.toFixed(2)]}),r.jsxs("span",{children:["Open: ₹",t.open.toFixed(2)]})]})]}),r.jsxs("div",{className:"trading-actions",children:[r.jsxs("button",{className:"btn btn-success btn-lg",children:["BUY ₹",t.ltp.toFixed(2)]}),r.jsxs("button",{className:"btn btn-danger btn-lg",children:["SELL ₹",t.ltp.toFixed(2)]})]})]}),r.jsxs("div",{className:"trading-main",children:[r.jsxs("div",{className:"trading-left",children:[r.jsxs("div",{className:"card mb-lg",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Symbol Search"})}),r.jsx("div",{className:"card-body",children:r.jsx(id,{selectedSymbol:s,onSymbolSelect:m,watchlist:h})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Price Chart"}),r.jsx("div",{className:"chart-controls",children:r.jsxs("select",{className:"form-select",children:[r.jsx("option",{value:"1m",children:"1 Min"}),r.jsx("option",{value:"5m",children:"5 Min"}),r.jsx("option",{value:"15m",children:"15 Min"}),r.jsx("option",{value:"1h",children:"1 Hour"}),r.jsx("option",{value:"1d",children:"1 Day"})]})})]}),r.jsx("div",{className:"card-body",children:r.jsx(ad,{symbol:s,height:400})})]})]}),r.jsxs("div",{className:"trading-center",children:[r.jsxs("div",{className:"card mb-lg",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Place Order"})}),r.jsx("div",{className:"card-body",children:r.jsx(sd,{symbol:s,symbolData:t,onOrderPlace:y,loading:l})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Market Depth"})}),r.jsx("div",{className:"card-body",children:r.jsx(ed,{symbol:s})})]})]}),r.jsxs("div",{className:"trading-right",children:[r.jsxs("div",{className:"card mb-lg",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Positions"}),r.jsx("span",{className:"badge",children:i.length})]}),r.jsx("div",{className:"card-body",children:r.jsx(nd,{positions:i,onPositionSelect:p=>e(p.symbol)})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"card-title",children:"Active Orders"}),r.jsx("span",{className:"badge",children:o.length})]}),r.jsx("div",{className:"card-body",children:r.jsx(td,{orders:o,onOrderCancel:p=>{console.log("Cancel order:",p)}})})]})]})]}),r.jsxs("div",{className:"trading-footer",children:[r.jsxs("div",{className:"quick-actions",children:[r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"⚡"}),r.jsx("span",{children:"Market Order"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"📌"}),r.jsx("span",{children:"Stop Loss"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"🎯"}),r.jsx("span",{children:"Target"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"🔄"}),r.jsx("span",{children:"Convert"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"❌"}),r.jsx("span",{children:"Exit All"})]})]}),r.jsxs("div",{className:"margin-info",children:[r.jsxs("span",{children:["Available Margin: ",r.jsx("strong",{children:"₹2,45,678"})]}),r.jsxs("span",{children:["Used Margin: ",r.jsx("strong",{children:"₹54,322"})]})]})]})]})},cs="https://quantumcrypto-l43mb.ondigitalocean.app";function od(){const[s,e]=j.useState(null),[t,n]=j.useState(!1),[i,a]=j.useState(!0),[o,c]=j.useState(!0),[l,d]=j.useState(!1),[h,u]=j.useState({}),[f,m]=j.useState("connecting");j.useEffect(()=>{y(),g(),v()},[]);const y=async()=>{try{const N=localStorage.getItem("theme");N&&c(N==="dark"),await p(),x()}catch(N){console.error("Failed to initialize app:",N)}finally{a(!1)}},p=async()=>{try{const N=await fetch(`${cs}/api/auth/status`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(N.ok){const O=await N.json();O.authenticated&&(e(O.user),n(!0))}}catch(N){console.error("Auth check failed:",N),n(!1)}},g=async()=>{try{const N=await fetch(`${cs}/api/system/status`);if(N.ok){const O=await N.json();u(O),m("connected")}else m("disconnected")}catch(N){console.error("System status check failed:",N),m("error")}},x=()=>{try{const N=localStorage.getItem("userPreferences");if(N){const O=JSON.parse(N);d(O.sidebarCollapsed||!1)}}catch(N){console.error("Failed to load preferences:",N)}},v=()=>{const N=setInterval(g,3e4);return()=>{clearInterval(N)}},S=N=>{e(N),n(!0)},b=async()=>{try{await fetch(`${cs}/api/auth/logout`,{method:"POST",credentials:"include"})}catch(N){console.error("Logout failed:",N)}finally{e(null),n(!1),localStorage.removeItem("userPreferences")}},_=()=>{const N=!o;c(N),localStorage.setItem("theme",N?"dark":"light")},k=()=>{const N=!l;d(N);const O=JSON.parse(localStorage.getItem("userPreferences")||"{}");O.sidebarCollapsed=N,localStorage.setItem("userPreferences",JSON.stringify(O))};return i?r.jsxs("div",{className:"app-loading",children:[r.jsx(Se,{size:"large"}),r.jsx("p",{children:"Initializing ShareKhan Trading System..."})]}):r.jsx(Gi,{children:r.jsx("div",{className:`app ${o?"dark-theme":"light-theme"}`,children:r.jsx(zi,{children:t?r.jsxs("div",{className:"app-layout",children:[r.jsx(Gl,{collapsed:l,onToggle:k,user:s}),r.jsxs("div",{className:`main-content ${l?"sidebar-collapsed":""}`,children:[r.jsx(Jl,{user:s,systemStatus:h,connectionStatus:f,darkMode:o,onToggleTheme:_,onToggleSidebar:k,onLogout:b}),r.jsx("div",{className:"content-area",children:r.jsxs(Ui,{children:[r.jsx(ee,{path:"/",element:r.jsx(zs,{})}),r.jsx(ee,{path:"/dashboard",element:r.jsx(zs,{})}),r.jsx(ee,{path:"/trading",element:r.jsx(rd,{})}),r.jsx(ee,{path:"/portfolio",element:r.jsx(Vl,{})}),r.jsx(ee,{path:"/analytics",element:r.jsx(Hi,{})}),r.jsx(ee,{path:"/risk",element:r.jsx(Yl,{})}),r.jsx(ee,{path:"/market-data",element:r.jsx(Hl,{})}),r.jsx(ee,{path:"/orders",element:r.jsx(Bl,{})}),r.jsx(ee,{path:"/system",element:r.jsx(Zl,{})}),r.jsx(ee,{path:"/settings",element:r.jsx(ql,{})}),r.jsx(ee,{path:"*",element:r.jsx(Wi,{to:"/dashboard"})})]})})]})]}):r.jsx(Kl,{onLogin:S})})})})}class cd extends Me.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Global error caught:",e,t)}render(){return this.state.hasError?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #2563eb, #7c3aed)",color:"white",fontFamily:"system-ui, sans-serif",textAlign:"center",gap:"1rem"},children:[r.jsx("h1",{children:"ShareKhan Trading Platform"}),r.jsx("p",{children:"Something went wrong. Please refresh the page."}),r.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"0.5rem",color:"white",cursor:"pointer"},children:"Refresh Page"})]}):this.props.children}}fs.createRoot(document.getElementById("root")).render(r.jsx(Me.StrictMode,{children:r.jsx(cd,{children:r.jsx(od,{})})}));
